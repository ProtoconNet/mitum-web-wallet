{"version":3,"sources":["../../../wyuinche/mitum-js-util/lib/util.js","../../../wyuinche/mitum-js-util/lib/hint.js","../../../wyuinche/mitum-js-util/lib/seal.js","../../../wyuinche/mitum-js-util/lib/sign.js","../../../wyuinche/mitum-js-util/lib/constant.js","../../../wyuinche/mitum-js-util/index.js","../../../wyuinche/mitum-js-util/lib/operation.js","lib/Account.js","text/mode.js","lib/History.js","store/actions/index.js","store/reducers/LoginReducer.js","lib/Url.js","store/reducers/OperationReducer.js","store/reducers/index.js","store/store.js","image/logo_trans.png","views/Home.js","components/buttons/SmallButton.js","components/InputBox.js","components/buttons/ConfirmButton.js","components/PrivateKeyLoginBox.js","components/RestoreKeyLoginBox.js","views/Login.js","components/buttons/SelectButton.js","components/modals/PublicKeyModal.js","lib/Validation.js","views/Wallet.js","views/KeyGen.js","views/ResKeyGen.js","views/Help.js","components/modals/OperationConfirm.js","components/infos/Keys.js","components/infos/SubInfo.js","components/infos/Balances.js","components/adders/KeyAdder.js","components/adders/AmountAdder.js","components/operations/CreateAccount.js","components/adders/ExtraAdder.js","components/operations/UpdateKey.js","components/operations/Transfer.js","views/Operation.js","views/Sign.js","components/Navigation.js","views/Logout.js","components/Footer.js","components/modals/LogoutConfirm.js","views/Response.js","views/UpdateKeyLoad.js","App.js","reportWebVitals.js","index.js","../../../wyuinche/mitum-js-util/lib/key.js"],"names":["Xconst","require","crypto","jsSHA3","Uint64BE","BigInteger","big","this","BigInt","num","value","Math","ceil","log","byteSize","_num","parseInt","absValue","_reverse","toBuffer","_buffer","Buffer","alloc","_off","writeUIntLE","concat","_buf","writeUIntBE","buf","from","i","length","tmp","ISOToUTC","iso","t","indexOf","z","substring","module","exports","_hint","type","VERSION","parseHinted","hinted","idx","parsed","hintless","hint","getTypeFromHint","lastIndexOf","getTimeStamp","Date","dateToUTC","date","toISOString","concatObjectsToBuffer","arr","concated","buffer","sha256","msg","createHash","update","digest","sum256","sha3_256","create","MC_ADDRESS","MC_TRANSFERS_OP_FACT","MC_TRANSFERS_OP","MC_KEY","MC_KEYS","MC_CREATE_ACCOUNTS_OP_FACT","MC_CREATE_ACCOUNTS_OP","MC_KEYUPDATER_OP_FACT","MC_KEYUPDATER_OP","MC_FEE_OP_FACT","MC_FEE_OP","MC_ACCOUNT","MC_NODE_INFO","MC_HAL","MC_PROBLEM","MC_ACCOUNT_VALUE","MC_OP_VALUE","MC_GENESIS_CURRENCIES_OP_FACT","MC_GENESIS_CURRENCIES_OP","MC_AMOUNT","MC_AMOUNT_STATE","MC_CREATE_ACCOUNTS_MULTIPLE_AMOUNTS","MC_CREATE_ACCOUNTS_SINGLE_AMOUNT","MC_TRANSFERS_ITEM_MULTI_AMOUNTS","MC_TRNASFERS_ITEM_SINGLE_AMOUNT","MC_CURRENCY_REGISTER_OP_FACT","MC_CURRENCY_REGISTER_OP","MC_CURRENCY_DESIGN","MC_NIL_FEEER","MC_FIXED_FEEER","MC_RATIO_FEEER","MC_CURRENCY_POLICY_UPDATER_OP_FACT","MC_CURRENCY_POLICY_UPDATER_OP","MC_CURRENCY_POLICY","JSON","BSON","STRING_ADDRESS","STELLAR_PRIVKEY","STELLAR_PBLCKEY","BTC_PRIVKEY","BTC_PBLCKEY","ETHER_PRIVKEY","ETHER_PBLCKEY","INIT_BALLOT","PROPOSAL","SIGN_BALLOT","ACCEPT_BALLOT","INIT_BALLOT_FACT","PROPOSAL_FACT","SIGN_BALLOT_FACT","ACCEPT_BALLOT_FACT","VOTEPROOF","BLOCK_V0","BLOCK_MANIFEST_V0","BLOCK_CONSENSUS_INFO_V0","BLOCK_SUFFRAGE_INFO_V0","BASE_FACT_SIGN","SEAL","BASE_FIXEDTREE_NODE","FIXEDTREE","OP_FIXEDTREE_NODE","BASE_OP_REASON","STETE_V0","STATE_BYTES_VALUE","STATE_DURATION_VALUE","STATE_HINTED_VALUE","STATE_NUMBER_VALUE","STATE_SLICE_VALUE","STATE_STRING_VALUE","BASE_NODE_V0","NODE_INFO_V0","LOCALFS_BLOCKDATA","BASE_BLOCKDATAMAP","BLOCKDATA_WRITER","PROBLEM","Xoper","Xsign","Xutil","Xhint","Xkey","bs58","Generator","netID","_id","key","weight","cid","keys","threshold","ks","_keys","push","Key","Keys","_toKeys","amts","_amounts","Amount","_toAmounts","_type","CreateAccountsItem","receiver","TransfersItem","sender","items","CreateAccountsFact","target","KeyUpdaterFact","TransfersFact","fact","memo","Operation","sk","opers","keypair","getKeypair","signedAt","bsignedAt","bsigner","getPublicKey","bopers","hash","bodyHash","signature","sign","seal","encode","body_hash","signer","signed_at","operations","dict","JSONParser","toJSONString","stringify","generateFile","fName","writeFile","error","console","_factSignToBuffer","_fact_sign","bsign","decode","bat","Signer","signKey","f_oper","before","parse","fs","readFileSync","undefined","after","factHash","bfactHash","factSign","newFactSign","bfact_sg","_fact_signs","_factSignsToBuffer","bmemo","FactSign","at","fact_sign","hintedKey","BTCKeypair","ETHKeypair","StellarKeypair","e","_VERSION","toKeypair","bbig","tight","bcid","amount","toString","currency","Address","addr","Item","amounts","bkeys","bamounts","item","breceiver","OperationFact","token","_generateHash","btoken","bsender","bitems","btarget","fact_signs","_generateFactSign","bhash","oper","Account","priv","data","address","privateKey","resKey","publicKeys","_embedded","map","x","balances","balance","accountType","OPER_CREATE_ACCOUNT","OPER_UPDATE_KEY","OPER_TRANSFER","OPER_DEFAULT","PAGE_LOGIN","PAGE_OPER","SHOW_PRIVATE","SHOW_RESTORE","TYPE_CREATE_ACCOUNT","operation","create_account","TYPE_UPDATE_KEY","update_key","TYPE_TRANSFER","transfer","History","history","me","inState","in_state","confirmedAt","confirmed_at","setItems","account","y","LOGIN","LOGOUT","SET_HISTORY","CLEAR_HISTORY","SET_OPERATION","SET_RESPONSE","login","restoreKey","logout","clearHistory","setOperation","json","setResponse","isBroadcast","isStateIn","res","status","initialState","isLogin","download","Object","prototype","hasOwnProperty","call","file","File","alert","URL","createObjectURL","mode","filename","rootReducer","combineReducers","state","action","actions","store","createStore","Home","props","isRedirect","setState","className","to","onClick","src","logo_trans","alt","React","Component","SmallButton","style","display","visible","disabled","children","InputBox","size","name","autoComplete","onChange","placeholder","useCopy","copy","ConfirmButton","opacity","PrivateKeyLoginBox","onChangeAddress","label","onChangePrivate","onLogin","trim","RestoreKeyLoginBox","getAccountInformation","a","axios","get","process","getAccountHistory","Login","isPriv","isActive","pubKey","then","setHistory","catch","pubKeys","signIn","radio","document","querySelector","checked","renderForm","withRouter","connect","dispatch","histories","splitHistories","_i","j","_j","_z","confirmation","direction","SelectButton","PublicKeyModal","isOpen","onClose","k","isOperation","signatures","isStateValid","location","titleStyle","flexDirection","alignItems","justifyContent","width","margin","padding","lineStyle","border","verticalAlign","title","content","textAlign","fontWeight","fontSize","Wallet","scrollToAccount","walletRef","current","scrollIntoView","behavior","createRef","isModalOpen","redirect","isDetailVisible","isPrivVisible","isResVisible","pathname","renderRedirect","refresh","ref","id","openModal","bal","onSelect","hist","closeModal","KEY_ETHER","KEY_STELLAR","KeyGen","privKey","publicKey","btc","pub","ether","stellar","Error","version","getKey","ResKeyGen","Help","broadcast","post","OperationConfirm","request","setResult","response","href","rel","onSend","Balances","labeled","KeyAdder","onKeyChange","onWeightChange","onAdd","isAddDisabled","useThres","thres","onThresChange","AmountAdder","onCurrencyChange","onAmountChange","CreateAccount","scrollToInput","createdRef","titleRef","generator","createKeys","formatKey","createAmounts","formatAmount","createAccountsFact","createCreateAccountsFact","createCreateAccountsItem","createAccounts","createOperation","addSign","created","setJson","onChangePub","onChangeWeight","onChangeThres","addKey","onChangeCurrency","onChangeAmount","addAmount","ExtraAdder","UpdateKey","keyUpdaterFact","createKeyUpdaterFact","keyUpdater","Transfer","transfersFact","createTransfersFact","createTransfersItem","transfers","preStyle","overflow","whiteSpace","getOperationFromType","Sign","scrollToJSON","jsonRef","isJsonOpen","infoRef","sigs","files","reader","FileReader","onload","result","readAsText","signOperation","sig","openJSON","jsonView","importJSON","onClickSend","onClickSign","isClose","Navigation","rand","check","close","Logout","signOut","Footer","LogoutConfirm","onLogout","keyHash","Response","isSignOut","clearJson","renderResponse","UpdateKeyLoad","counter","getResult","_hash","_res","reason","setTimeout","hs","rs","broad","getResponse","App","exact","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById","bs58check","eccrypto","ec","compare","BaseKey","w","karr","sortedkeys","sort","bthreshold","Keypair","_generatePublicKey","_msg","getPrivate","canonical","toDER","_sk","_decode","slice","keyFromPrivate","getPublicCompressed","rlen","r","slen","s","brlen","little","getPublic","fromSecret","_pk","genKeyPair","_hs","checksum","subarray","_btckp","random","secret","_key"],"mappings":"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","file":"static/js/main.aea5b229.chunk.js","sourcesContent":["const Xconst = require('./constant');\nconst crypto = require('crypto');\nconst jsSHA3 = require('js-sha3');\nconst { Uint64BE } = require('int64-buffer');\n\n/**\n * @class\n * Contains big number and Converts number to Buffer.\n * @property {BigInt} big - number in BigInt\n * @property {number} num - number in Number\n */\nclass BigInteger {\n    /**\n     * @constructor\n     * @param {number} big - number\n     */\n    constructor(big) {\n        this.big = BigInt(big);\n        this.num = big;\n    }\n\n    /**\n     * @property\n     * Returns big in number.\n     * @return {number} - big\n     */\n    get value() {\n        return this.num;\n    }\n\n    /**\n     * @property\n     * Returns absolute value of big.\n     * @return {BigInt} - abs(big)\n     */\n    get absValue() {\n        if (this.big < 0) { return BigInt(-this.value); }\n        else { return this.big; }\n    }\n\n    byteSize() {\n        return (this.num < 2) ? 1 : Math.ceil((Math.log(this.num) / Math.log(2)) / 8);\n    }\n\n    /**\n     * @method\n     * Returns 8-length Buffer of big by big-endian.\n     * @return {Buffer} - 8-length big-endian Buffer of big\n     */\n    buffer() {\n        if (this.byteSize() > 8) {\n            throw '[ERROR] Buffer overflow!';\n        }\n        const _num = new Uint64BE(parseInt(this.absValue));\n        return this._reverse(_num.toBuffer());\n    }\n\n    /**\n     * @method\n     * Returns tight-length Buffer of big by little-endian.\n     * @return {Buffer} - tight-length little-endian Buffer of big\n     */\n    little() {\n        if (this.byteSize() > 4) {\n            throw '[ERROR] Buffer overflow!'\n        }\n        var _buffer = Buffer.alloc(this.byteSize());\n        const _off = Buffer.alloc(4 - this.byteSize());\n\n        _buffer.writeUIntLE(this.num, 0, this.byteSize());\n        _buffer = this._reverse(_buffer);\n\n        return Buffer.concat([_buffer, _off]);\n    }\n\n    /**\n     * @method\n     * Returns tight-length Buffer of big by big-endian.\n     * @return {Buffer} - tight-length big-endian Buffer of big\n     */\n    tight() {\n        if (this.byteSize() > 8) {\n            throw '[ERROR] Buffer overflow!';\n        }\n        const _buf = Buffer.alloc(this.byteSize());\n        _buf.writeUIntBE(this.num, 0, this.byteSize());\n        return _buf;\n    }\n\n    /**\n     * @method\n     * Returns reversed Buffer.\n     * @param {Buffer} buf - Buffer object to reverse\n     * @return {Buffer} - Reversed Buffer\n     */\n    _reverse(buf) {\n        const _buf = Buffer.from(buf);\n        for (var i = 0; i < _buf.length / 2; i++) {\n            const tmp = _buf[i];\n            _buf[i] = _buf[_buf.length - 1 - i];\n            _buf[_buf.length - 1 - i] = tmp;\n        }\n        return _buf;\n    }\n}\n\n/**\n * @function\n * Add mitum-currency version to hint type.\n * @param {string} type - mitum or mitum-currency type\n * @return {string} - '[type]-[version]'\n */\nconst _hint = (type) => {\n    return type + '-' + Xconst.VERSION;\n}\n\n/**\n * @function\n * Parses hinted address or hinted key.\n * @param {string} hinted - Hinted addrss/key\n * @return {object} - Parsing result # object{hintless, hint}\n */\nconst parseHinted = (hinted) => {\n    const idx = hinted.indexOf(':');\n    const parsed = {};\n\n    if (idx === -1) {\n        throw '[ERROR] Invalid hinted format';\n    }\n    else if (hinted.indexOf('-') === -1) {\n        throw '[ERROR] Invalid hint format';\n    }\n\n    parsed.hintless = hinted.substring(0, idx);\n    parsed.hint = hinted.substring(idx + 1);\n\n    return parsed;\n};\n\n/**\n * @function\n * Extracts type from hint # hint: [type]-[version]\n * @param {string} hint - '[type]-[version]' format hint\n * @return {string} - mitum or mitum-currency hint type\n */\nconst getTypeFromHint = (hint) => {\n    const idx = hint.lastIndexOf('-');\n\n    if (idx === -1) {\n        throw '[ERROR] Invalid hint format';\n    }\n\n    return hint.substring(0, idx);\n};\n\n/**\n * @function\n * Returns timestamp as Date.\n * @return {Date} - Timestamp in Date\n */\nconst getTimeStamp = () => {\n    return new Date();\n};\n\n/**\n * @function\n * Returns UTC formatted date.\n * Time Zone Offset must be +0000.\n * @param {Date} date - Date object to change\n * @return {string} - UTC-format date string\n */\nconst dateToUTC = (date) => {\n    return ISOToUTC(date.toISOString());\n};\n\n/**\n * @function\n * Returns UTC formatted date.\n * Time Zone Offset must be +0000.\n * @param {string} iso - iso string to change\n * @return {string} - UTC-format date string\n */\nconst ISOToUTC = (iso) => {\n    const t = iso.indexOf('T');\n    const z = iso.indexOf('Z');\n\n    return iso.substring(0, t)\n        .concat(\n            ' ',\n            iso.substring(t + 1, z),\n            ' ',\n            '+0000',\n            ' UTC'\n        );\n}\n/**\n * @function\n * Concatenates Buffers in array then returns concatenated Buffer.\n * @param {object} arr - Array that each element is an object implementing buffer() method\n * @return {Buffer} - Concatenated Buffer\n */\nconst concatObjectsToBuffer = (arr) => {\n    let concated = Buffer.alloc(0);\n\n    for (var i = 0; i < arr.length; i++) {\n        concated = Buffer.concat([concated, arr[i].buffer()]);\n    }\n\n    return concated;\n}\n\n/**\n * @function\n * Returns sha2-256 hash of msg.\n * @param {Buffer} msg - Message to hash\n * @return {Buffer} - Hash digest of msg\n */\nconst sha256 = (msg) => {\n    return crypto.createHash('sha256').update(msg).digest();\n};\n\n/**\n * @function\n * Returns sha3-256 hash of msg.\n * @param {Buffer} msg - Message to hash\n * @return {Buffer} - Hash digest of msg\n */\nconst sum256 = (msg) => {\n    return Buffer.from(jsSHA3.sha3_256.create().update(msg).digest());\n};\n\nmodule.exports = {\n    BigInteger,\n    _hint,\n    parseHinted,\n    getTypeFromHint,\n    getTimeStamp,\n    dateToUTC,\n    ISOToUTC,\n    concatObjectsToBuffer,\n    sha256,\n    sum256\n};","/* mitum-currency hint */\nexports.MC_ADDRESS = \"mca\";\nexports.MC_TRANSFERS_OP_FACT = \"mitum-currency-transfers-operation-fact\";\nexports.MC_TRANSFERS_OP = \"mitum-currency-transfers-operation\";\nexports.MC_KEY = \"mitum-currency-key\";\nexports.MC_KEYS = \"mitum-currency-keys\";\nexports.MC_CREATE_ACCOUNTS_OP_FACT = \"mitum-currency-create-accounts-operation-fact\";\nexports.MC_CREATE_ACCOUNTS_OP = \"mitum-currency-create-accounts-operation\";\nexports.MC_KEYUPDATER_OP_FACT = \"mitum-currency-keyupdater-operation-fact\";\nexports.MC_KEYUPDATER_OP = \"mitum-currency-keyupdater-operation\";\nexports.MC_FEE_OP_FACT = \"mitum-currency-fee-operation-fact\";\nexports.MC_FEE_OP = \"mitum-currency-fee-operation\";\nexports.MC_ACCOUNT = \"mitum-currency-account\";\nexports.MC_NODE_INFO = \"mitum-currency-node-info\";\nexports.MC_HAL = \"mitum-currency-hal\";\nexports.MC_PROBLEM = \"mitum-currency-problem\";\nexports.MC_ACCOUNT_VALUE = \"mitum-currency-account-value\";\nexports.MC_OP_VALUE = \"mitum-currency-operation-value\";\nexports.MC_GENESIS_CURRENCIES_OP_FACT = \"mitum-currency-genesis-currencies-operation-fact\";\nexports.MC_GENESIS_CURRENCIES_OP = \"mitum-currency-genesis-currencies-operation\";\nexports.MC_AMOUNT = \"mitum-currency-amount\";\nexports.MC_AMOUNT_STATE = \"mitum-currency-amount-state\";\nexports.MC_CREATE_ACCOUNTS_MULTIPLE_AMOUNTS = \"mitum-currency-create-accounts-multiple-amounts\";\nexports.MC_CREATE_ACCOUNTS_SINGLE_AMOUNT = \"mitum-currency-create-accounts-single-amount\";\nexports.MC_TRANSFERS_ITEM_MULTI_AMOUNTS = \"mitum-currency-transfers-item-multi-amounts\";\nexports.MC_TRNASFERS_ITEM_SINGLE_AMOUNT = \"mitum-currency-transfers-item-single-amount\";\nexports.MC_CURRENCY_REGISTER_OP_FACT = \"mitum-currency-currency-register-operation-fact\";\nexports.MC_CURRENCY_REGISTER_OP = \"mitum-currency-currency-register-operation\";\nexports.MC_CURRENCY_DESIGN = \"mitum-currency-currency-design\";\nexports.MC_NIL_FEEER = \"mitum-currency-nil-feeer\";\nexports.MC_FIXED_FEEER = \"mitum-currency-fixed-feeer\";\nexports.MC_RATIO_FEEER = \"mitum-currency-ratio-feeer\";\nexports.MC_CURRENCY_POLICY_UPDATER_OP_FACT = \"mitum-currency-currency-policy-updater-operation-fact\";\nexports.MC_CURRENCY_POLICY_UPDATER_OP = \"mitum-currency-currency-policy-updater-operation\";\nexports.MC_CURRENCY_POLICY = \"mitum-currency-currency-policy\";\n\n/* mitum hint */\nexports.JSON = \"json-encoder0101\";\nexports.BSON = \"bson-encoder\";\nexports.STRING_ADDRESS = \"sa\";\nexports.STELLAR_PRIVKEY = \"stellar-priv\";\nexports.STELLAR_PBLCKEY = \"stellar-pub\";\nexports.BTC_PRIVKEY = \"btc-priv\";\nexports.BTC_PBLCKEY = \"btc-pub\";\nexports.ETHER_PRIVKEY = \"ether-priv\";\nexports.ETHER_PBLCKEY = \"ether-pub\";\nexports.INIT_BALLOT = \"init-ballot\";\nexports.PROPOSAL = \"proposal\";\nexports.SIGN_BALLOT = \"sign-ballot\";\nexports.ACCEPT_BALLOT = \"accept-ballot\";\nexports.INIT_BALLOT_FACT = \"init-ballot-fact\";\nexports.PROPOSAL_FACT = \"proposal-fact\";\nexports.SIGN_BALLOT_FACT = \"sign-ballot-fact\";\nexports.ACCEPT_BALLOT_FACT = \"accept-ballot-fact\";\nexports.VOTEPROOF = \"voteproof\";\nexports.BLOCK_V0 = \"block\";\nexports.BLOCK_MANIFEST_V0 = \"block-manifest\";\nexports.BLOCK_CONSENSUS_INFO_V0 = \"block-consensus-info\";\nexports.BLOCK_SUFFRAGE_INFO_V0 = \"block-suffrage-info\";\nexports.BASE_FACT_SIGN = \"base-fact-sign\";\nexports.SEAL = \"seal\";\nexports.BASE_FIXEDTREE_NODE = \"base-fixedtree-node\";\nexports.FIXEDTREE = \"fixedtree\";\nexports.OP_FIXEDTREE_NODE = \"operation-fixedtree-node\";\nexports.BASE_OP_REASON = \"base-operation-reason\";\nexports.STETE_V0 = \"stete\";\nexports.STATE_BYTES_VALUE = \"state-bytes-value\";\nexports.STATE_DURATION_VALUE = \"state-duration-value\";\nexports.STATE_HINTED_VALUE = \"state-hinted-value\";\nexports.STATE_NUMBER_VALUE = \"state-number-value\";\nexports.STATE_SLICE_VALUE = \"state-slice-value\";\nexports.STATE_STRING_VALUE = \"state-string-value\";\nexports.BASE_NODE_V0 = \"base-node\";\n// exports.HASH_BYTES = \"0180\";\n// exports.HASH_SHA256 = \"0181\";\n// exports.HASH_SHA512 = \"0182\";\nexports.NODE_INFO_V0 = \"node-info\";\nexports.LOCALFS_BLOCKDATA = \"localfs-blockdata\";\nexports.BASE_BLOCKDATAMAP = \"base-blockdatamap\";\nexports.BLOCKDATA_WRITER = \"blockdata-writer\";\n\nexports.PROBLEM = \"mitum-problem\";","/* SDK module */\nconst Xoper = require('./operation');\nconst Xsign = require('./sign');\nconst Xutil = require('./util');\nconst Xhint = require('./hint');\nconst Xkey = require('./key');\n\n/* base58 package */\nconst bs58 = require('bs58');\n\n\n/**\n * @function\n * Generate Keys object with key list.\n * @param {object} ks - Array that each element is simple key object # key{key, weight}\n * @param {number} threshold - Keys threshold\n * @return {Xkey.Keys} - Generate Keys object\n */\nconst _toKeys = (ks, threshold) => {\n    const _keys = [];\n\n    for (var i = 0; i < ks.length; i++) {\n        _keys.push(\n            new Xkey.Key(\n                ks[i].key,\n                ks[i].weight\n            )\n        )\n    }\n\n    const keys = new Xkey.Keys(\n        _keys,\n        threshold,\n    );\n\n    return keys;\n};\n\n/**\n * @function\n * Generate Amount object list with amounts.\n * @param {object} amts - Array that each element is simple amount object # amount{big, cid}\n * @return {object} - Amount obejct list\n */\nconst _toAmounts = (amts) => {\n    const _amounts = [];\n\n    for (var i = 0; i < amts.length; i++) {\n        _amounts.push(\n            new Xoper.Amount(\n                amts[i].big,\n                amts[i].cid\n            )\n        );\n    }\n\n    return _amounts;\n};\n\n/**\n * @class\n * Generates all objects that are necessary to create operations and seals.\n * @property {string} netID - Network ID\n */\nclass Generator {\n    /**\n     * @constructor\n     * @param {string} netID - Network ID\n     */\n    constructor(netID) {\n        this.netID = netID;\n    }\n\n    /**\n     * @property\n     * @return {string} - Network ID\n     */\n    get id() {\n        return this.netID;\n    }\n\n    /**\n     * @method\n     * Set new network ID.\n     * @param {string} _id - new network ID\n     */\n    setNetworkID(_id) {\n        this.netID = _id;\n    }\n\n    /**\n     * @method\n     * Create simple key object.\n     * @param {string} key - Hinted key\n     * @param {number} weight - weight\n     * @return {object} - {key, weight}\n     */\n    formatKey(key, weight) {\n        if (key.indexOf(':') === -1) {\n            throw '[ERROR] Invalid key';\n        }\n        if (typeof (weight) !== 'number') {\n            throw '[ERROR] Invalid weight'\n        }\n        return {\n            key: key,\n            weight: weight\n        };\n    }\n\n    /**\n     * @method\n     * Create simple amount object.\n     * @param {string} big - Target amount\n     * @param {number} cid - Currency ID\n     * @return {object} - {big, cid}\n     */\n    formatAmount(big, cid) {\n        if (typeof (big) !== 'number') {\n            throw '[ERROR] Invalid amount';\n        }\n        if (cid.length < 1) {\n            throw '[ERROR] Invalid currency id';\n        }\n        return {\n            big: big,\n            cid: cid\n        }\n    }\n\n    /**\n     * @method\n     * Create Keys object.\n     * @param {object} keys - Array of simple key objects #{key, weight}\n     * @param {number} threshold - threshold\n     * @return {Xkey.Keys} - Created Keys object\n     */\n    createKeys(keys, threshold) {\n        return _toKeys(keys, threshold);\n    };\n\n    /**\n     * @method\n     * Create Amount object Array.\n     * @param {object} amounts - Array of simple amount objects #{big, cid}\n     * @return {object} - Array of Amount obejcts\n     */\n    createAmounts(amts) {\n        return _toAmounts(amts);\n    };\n\n    /**\n     * @method\n     * Create CreateAccountsItem object.\n     * @param {Xkey.Keys} keys - Keys object\n     * @param {object} amts - Array of Amount objects\n     * @return {Xoper.CreateAccountsItem} - Created CreateAccountsItem object\n     */\n    createCreateAccountsItem(keys, amts) {\n        const _type = amts.length <= 1 ? Xhint.MC_CREATE_ACCOUNTS_SINGLE_AMOUNT : Xhint.MC_CREATE_ACCOUNTS_MULTIPLE_AMOUNTS;\n        return new Xoper.CreateAccountsItem(\n            _type, keys, amts\n        );\n    };\n\n    /**\n     * @method\n     * Create TransfersItem object.\n     * @param {string} receiver - Hinted receiver address\n     * @param {object} amts - Array of Amount objects\n     * @return {Xoper.TransfersItem} - Created TransfersItem object\n     */\n    createTransfersItem(receiver, amts) {\n        const _type = amts.length <= 1 ? Xhint.MC_TRNASFERS_ITEM_SINGLE_AMOUNT : Xhint.MC_TRANSFERS_ITEM_MULTI_AMOUNTS;\n        return new Xoper.TransfersItem(\n            _type, receiver, amts\n        )\n    };\n\n    /**\n     * @method\n     * Create CreateAccountsFact object.\n     * @param {string} sender - Hinted sender address\n     * @param {object} items - Array of CreateAccountsItem objects\n     * @return {Xoper.CreateAccountsFact} - Created CreateAccountsFact object\n     */\n    createCreateAccountsFact(sender, items) {\n        return new Xoper.CreateAccountsFact(\n            sender, items\n        );\n    };\n\n    /**\n     * @method\n     * Create KeyUpdaterFact object.\n     * @param {string} target - Hinted target address\n     * @param {string} cid - Currency ID\n     * @param {Xkey.Keys} - Keys object\n     * @return {Xoper.KeyUpdaterFact} - Created KeyUpdaterFact object\n     */\n    createKeyUpdaterFact(target, cid, keys) {\n        return new Xoper.KeyUpdaterFact(\n            target, cid, keys\n        );\n    };\n\n    /**\n     * @method\n     * Create TransfersFact object.\n     * @param {string} sender - Hinted sender address\n     * @param {object} items - Array of TransfersItem objects\n     * @return {Xoper.TransfersFact} - Created TransfersFact object\n     */\n    createTransfersFact(sender, items) {\n        return new Xoper.TransfersFact(\n            sender, items\n        )\n    };\n\n    /**\n     * @method\n     * Create Operation.\n     * @param {Xoper.OperationFact} fact - Operation fact object\n     * @param {string} memo - Operation memo\n     * @return {Xoper.Operation} - Created Operation\n     */\n    createOperation(fact, memo) {\n        let _type;\n\n        if (fact instanceof Xoper.CreateAccountsFact) {\n            _type = Xhint.MC_CREATE_ACCOUNTS_OP;\n        }\n        else if (fact instanceof Xoper.KeyUpdaterFact) {\n            _type = Xhint.MC_KEYUPDATER_OP;\n        }\n        else if (fact instanceof Xoper.TransfersFact) {\n            _type = Xhint.MC_TRANSFERS_OP;\n        }\n        else {\n            throw '[ERROR] Invalid fact object';\n        }\n\n        return new Xoper.Operation(\n            this.netID, _type, memo, fact\n        );\n    };\n\n    /**\n     * @method\n     * Create Seal.\n     * @param {string} sk - Hinted signing key\n     * @param {object} opers - Array of Operation objects\n     * @return {object} - Created seal object\n     */\n    createSeal(sk, opers) {\n        const keypair = Xsign.getKeypair(sk);\n        const signedAt = Xutil.getTimeStamp();\n        const bsignedAt = Buffer.from(Xutil.dateToUTC(signedAt));\n        const bsigner = Buffer.from(keypair.getPublicKey());\n\n        let bopers = Buffer.from('');\n        for (var i = 0; i < opers.length; i++) {\n            bopers = Buffer.concat([bopers, opers[i].hash]);\n        }\n\n        const bodyHash = Xutil.sum256(\n            Buffer.concat([bsigner, bsignedAt, bopers]));\n\n        const signature = keypair.sign(\n            Buffer.concat(\n                [bodyHash, Buffer.from(this.netID)]\n            )\n        );\n\n        const hash = Xutil.sum256(\n            Buffer.concat([bodyHash, signature])\n        );\n\n        const seal = {};\n        seal._hint = Xutil._hint(Xhint.SEAL);\n        seal.hash = bs58.encode(hash);\n        seal.body_hash = bs58.encode(bodyHash);\n        seal.signer = keypair.getPublicKey();\n        seal.signature = bs58.encode(signature);\n        seal.signed_at = signedAt.toISOString();\n\n        const operations = [];\n        for (var i = 0; i < opers.length; i++) {\n            operations.push(opers[i].dict());\n        }\n        seal.operations = operations;\n\n        return seal;\n    };\n};\n\n/**\n * @constructor\n * Converts seal to dictionary-format string and Generates json file.\n */\nconst JSONParser = {\n    /**\n     * @method\n     * Seal to dictionary-format string\n     * @param {object} seal - seal/operation object\n     * @return {string} - Converted seal\n     */\n    toJSONString: (seal) => {\n        return JSON.stringify(seal, null, 4);\n    },\n    /**\n     * @method\n     * Generate json file.\n     * @param {object} seal - seal/operation object\n     * @param {string} fName - file to generate # file name must be '*.json' format\n     */\n    generateFile: (seal, fName) => {\n        const fs = require('fs');\n        fs.writeFile(fName, JSON.stringify(seal, null, 4), (error) => {\n            if (error) throw error;\n        });\n        console.log(\"generateFile() arg: \" + fName + \", Success...\");\n    }\n};\n\nconst _factSignToBuffer = (_fact_sign) => {\n    const bsigner = Buffer.from(_fact_sign['signer']);\n    const bsign = bs58.decode(_fact_sign['signature']);\n    const bat = Buffer.from(Xutil.ISOToUTC(_fact_sign['signed_at']));\n\n    return Buffer.concat([bsigner, bsign, bat]);\n};\n\nconst _factSignsToBuffer = (_fact_signs) => {\n    let buffer = Buffer.from('');\n    for (var i = 0; i < _fact_signs.length; i++) {\n        buffer = Buffer.concat([buffer, _factSignToBuffer(_fact_signs[i])]);\n    }\n    return buffer;\n};\n\nclass Signer {\n    constructor(netID, sk) {\n        this.netID = netID;\n        this.signKey = sk;\n    }\n    setNetId(_id) {\n        this.netID = _id;\n    }\n\n    signOperation(f_oper) {\n        const before = typeof (f_oper) === typeof (\"\") ? JSON.parse(fs.readFileSync(f_oper))\n            : (typeof (f_oper) === typeof ({}) ? f_oper : undefined);\n        if (!before) {\n            return undefined;\n        }\n\n        const after = {};\n        const factHash = before['fact']['hash'];\n        const bfactHash = bs58.decode(factHash);\n        const factSign = before['fact_signs'];\n\n        factSign.push(\n            Xsign.newFactSign(\n                Buffer.concat([\n                    bfactHash, Buffer.from(this.netID)\n                ]),\n                this.signKey\n            ).dict()\n        );\n        const bfact_sg = _factSignsToBuffer(factSign);\n\n        after['memo'] = before['memo'];\n        after['_hint'] = before['_hint'];\n        after['fact'] = before['fact'];\n        after['fact_signs'] = factSign;\n\n        const bmemo = Buffer.from(before['memo']);\n        after['hash'] = bs58.encode(\n            Xutil.sum256(Buffer.concat([bfactHash, bfact_sg, bmemo]))\n        );\n\n        return after;\n    }\n}\n\nmodule.exports = {\n    Generator,\n    JSONParser,\n    Signer\n};","/* SDK module */\nconst Xutil = require('./util');\nconst Xkey = require('./key');\nconst Xhint = require('./hint');\n\n/* base58 package */\nconst bs58 = require('bs58');\n\n\n/**\n * @class\n * Fact Signature.\n * @property {string} hint - 'BASE_FACT_SIGN-[version]'\n * @property {string} signer - signer\n * @property {Buffer} sign - Fact signature\n * @property {Date} at - Signed time\n */\nclass FactSign {\n    /**\n     * @constructor\n     * @param {string} signer - signer who signed\n     * @param {Buffer} sign - Fact signature\n     * @param {Date} at - Signed time\n     */\n    constructor(signer, sign, at) {\n        this.hint = Xutil._hint(Xhint.BASE_FACT_SIGN);\n        this.signer = signer;\n        this.sign = sign;\n        this.at = at;\n    }\n\n    /**\n     * @method\n     * Concatenate signer-Buffer, sign-Buffer, and UTC-format-at-Buffer then\n     * Returns concatenated Buffer.\n     * @return {Buffer} - Concatenated Buffer: signer-Buffer~sign-Buffer~UTC-at-Buffer\n     */\n    buffer() {\n        const bsigner = Buffer.from(this.signer);\n        const bsign = this.sign;\n        const bat = Buffer.from(Xutil.dateToUTC(this.at));\n\n        return Buffer.concat([bsigner, bsign, bat]);\n    }\n\n    /**\n     * @method\n     * Returns at in ISO format.\n     * @return {string} - ISO formatted at\n     */\n    signedAt() {\n        return this.at.toISOString();\n    }\n\n    /**\n     * @method\n     * Returns fact signature dictionary.\n     * @return {object} - {_hint, signer, signature, signed_at}\n     */\n    dict() {\n        const fact_sign = {};\n        fact_sign._hint = this.hint;\n        fact_sign.signer = this.signer;\n        fact_sign.signature = bs58.encode(this.sign);\n        fact_sign.signed_at = this.signedAt()\n        return fact_sign;\n    }\n};\n\n/**\n * @function\n * Parse hinted private key then generate keypair.\n * @param {string} hintedKey - Hinted private key\n * @return {Xkey.Keypair} - [ BTCKeypair | ETHERKeypair | StellarKeypair ]\n */\nconst getKeypair = (hintedKey) => {\n    const parsed = Xutil.parseHinted(hintedKey);\n\n    switch (Xutil.getTypeFromHint(parsed.hint)) {\n        case Xhint.BTC_PRIVKEY:\n            return new Xkey.BTCKeypair(parsed.hintless);\n        case Xhint.ETHER_PRIVKEY:\n            return new Xkey.ETHKeypair(parsed.hintless);\n        case Xhint.STELLAR_PRIVKEY:\n            return new Xkey.StellarKeypair(parsed.hintless);\n        default: throw '[ERROR] Invalid Signing Key';\n    }\n};\n\n/**\n * @function\n * Generate new fact signature.\n * @param {Buffer} msg - Message to sign\n * @param {string} hintedKey - Hinted signing key\n * @return {FactSign} - Generated fact signature signed by hintedKey\n */\nconst newFactSign = (msg, hintedKey) => {\n    let factSign;\n    let keypair;\n\n    try {\n        keypair = getKeypair(hintedKey);\n        factSign = new FactSign(\n            keypair.getPublicKey(),\n            keypair.sign(msg),\n            Xutil.getTimeStamp()\n        );\n    } catch (e) {\n        console.log(e);\n        return null;\n    }\n\n    return factSign;\n};\n\nmodule.exports = {\n    FactSign,\n    getKeypair,\n    newFactSign\n};","/* mitum-currency version */\nexports.VERSION = \"v0.0.1\";\n\n/* SDK version */\nexports._VERSION = \"v0.0.1\";\n","module.exports = {\n    Generator: require('./lib/seal').Generator,\n    JSONParser: require('./lib/seal').JSONParser,\n    getKeypair: require('./lib/key').getKeypair,\n    toKeypair: require('./lib/key').toKeypair,\n    Signer: require('./lib/seal').Signer\n};","/* SDK module */\nconst Xsign = require('./sign');\nconst Xutil = require('./util');\nconst Xhint = require('./hint');\nconst Xkey = require('./key');\n\n/* base58 package */\nconst bs58 = require('bs58');\n\n\n/**\n * @class\n * Amount with specific currency.\n * @property {string} hint - 'MC_AMOUNT-[version]'\n * @property {Xutil.BigInteger} big - Target amount\n * @property {string} cid - Currency ID\n */\nclass Amount {\n    /** \n     * @constructor\n     * @param {number} big - Target amount\n     * @param {string} cid - Currenct ID\n    */\n    constructor(big, cid) {\n        this.hint = Xutil._hint(Xhint.MC_AMOUNT);\n        this.big = new Xutil.BigInteger(big);\n        this.cid = cid;\n    }\n\n    /**\n     * @method\n     * Concatenates every big.tight() and cid Buffer then\n     * Returns concatenated Buffer.\n     * @return {Buffer} - Concatenated Buffer: big.tight()~cid-Buffer\n     */\n    buffer() {\n        const bbig = this.big.tight();\n        const bcid = Buffer.from(this.cid);\n\n        return Buffer.concat([bbig, bcid]);\n    }\n\n    /**\n     * @method\n     * Returns amount dictionary.\n     * @return {object} - Dictionary object: {_hint, hash, threshold}\n     */\n    dict() {\n        const amount = {};\n        amount._hint = this.hint;\n        amount.amount = this.big.value.toString();\n        amount.currency = this.cid;\n        return amount;\n    }\n};\n\n\n/**\n * @class\n * Account address.\n * @property {string} hint - 'mca-[version]'\n * @property {string} addr - Hintless address\n */\nclass Address {\n    /**\n     * @constructor\n     * @param {string} addr - Hinted address\n     */\n    constructor(addr) {\n        let parsed = Xutil.parseHinted(addr);\n\n        this.hint = parsed.hint;\n        this.addr = parsed.hintless;\n    }\n\n    /**\n     * @method\n     * Returns Buffer of hintless address.\n     * @return {Buffer} - Buffered hintless address \n     */\n    buffer() {\n        return Buffer.from(this.addr);\n    }\n\n    /**\n     * @method\n     * Returns hinted address.\n     * @return {string} - Hinted address\n     */\n    hinted() {\n        return this.addr + ':' + this.hint;\n    }\n};\n\n\n/**\n * @class\n * Item containing item type and amount list.\n * CreateAccountsItem and TransfersItem extend this class.\n * type: [ MC_CREATE_ACCOUNTS_MULTIPLE_AMOUNTS | MC_CREATE_ACCOUNTS_SINGLE_AMOUNT | MC_TRANSFERS_ITEM_MULTI_AMOUNTS | MC_TRANSFERS_ITEM_SINGLE_AMOUNT ]\n * @property {string} hint - '[type]-[version]' \n * @property {object} amounts - Array that each element is amount # amount:{big, cid}\n*/\nclass Item {\n    /**\n     * @constructor\n     * type: [ MC_CREATE_ACCOUNTS_MULTIPLE_AMOUNTS | MC_CREATE_ACCOUNTS_SINGLE_AMOUNT | MC_TRANSFERS_ITEM_MULTI_AMOUNTS | MC_TRANSFERS_ITEM_SINGLE_AMOUNT ]\n     * @param {string} type - [type]\n     * @param {object} amounts - Array that each element is amount # amount:{big, cid}\n    */\n    constructor(type, amounts) {\n        this.hint = Xutil._hint(type);\n        this.amounts = amounts;\n    }\n\n    /**\n     * @abstract\n     * Returns Buffer for Item.\n     * @return {Buffer} - Concatenated Buffer\n     */\n    buffer() {\n        throw '[ERROR] Unimplemented function bytes()';\n    }\n\n    /**\n     * @abstract\n     * Returns item dictionary.\n     * @return {object} - Dictionary object: {_hint, ...}\n     */\n    dict() {\n        throw '[ERROR] Unimplemented function dict()';\n    }\n};\n\n\n/**\n * @class\n * @extends Item\n * Item for Create-Accounts operation.\n * @property {string} hint - '[ MC_CREATE_ACCOUNTS_MULTIPLE_AMOUNTS | MC_CREATE_ACCOUNTS_SINGLE_AMOUNT ]-[version]'\n * @property {Xkey.Keys} keys - Keys object consists of target keys\n * @property {object} amounts - Array that each element is amount # amount:{big, cid}\n */\nclass CreateAccountsItem extends Item {\n    /**\n     * @constructor\n     * @param {string} type - [ MC_CREATE_ACCOUNTS_MULTIPLE_AMOUNTS | MC_CREATE_ACCOUNTS_SINGLE_AMOUNT ]\n     * @param {Xkey.Keys} keys - Key object consists of target keys\n     * @param {object} amounts - Array that each element is amount # amount:{big, cid}\n     */\n    constructor(type, keys, amounts) {\n        super(type, amounts);\n        this.keys = keys;\n    }\n\n    /**\n     * @override\n     * Concatenates keys.buffer() and every amount.buffer() in amounts list then\n     * Returns concatenated Buffer.\n     * @return {Buffer} - Concatenated Buffer: keys.buffer()~*amount.buffer()\n     */\n    buffer() {\n        const bkeys = this.keys.buffer();\n        const bamounts = Xutil.concatObjectsToBuffer(this.amounts);\n\n        return Buffer.concat([bkeys, bamounts]);\n    }\n\n    /**\n     * @override\n     * Returns Create-Accounts item dictionary.\n     * @return {object} - Dictionary object: {_hint, keys, amounts}\n     */\n    dict() {\n        const item = {};\n        item._hint = this.hint;\n        item.keys = this.keys.dict();\n\n        const amounts = [];\n        for (var i = 0; i < this.amounts.length; i++) {\n            amounts.push(\n                this.amounts[i].dict()\n            );\n        }\n        item.amounts = amounts;\n\n        return item;\n    }\n};\n\n\n/**\n * @class\n * @extends Item\n * Item for Transfers operation.\n * @property {string} hint - '[ MC_TRANSFERS_ITEM_MULTI_AMOUNTS | MC_TRANSFERS_ITEM_SINGLE_AMOUNT ]-[version]'\n * @property {Address} receiver - Hinted receiver address\n * @property {object} amounts - Array that each is amount # amount:{big, cid}\n */\nclass TransfersItem extends Item {\n    constructor(type, receiver, amounts) {\n        super(type, amounts);\n        this.receiver = new Address(receiver);\n    }\n\n    /**\n     * @override\n     * Concatenates hinted-receiver-Buffer and every amount.buffer() in amounts list then\n     * Returns concatenated Buffer.\n     * @return {Buffer} - Concatenated Buffer: hinted-receiver-Buffer~*amount.buffer()\n     */\n    buffer() {\n        const breceiver = Buffer.from(this.receiver.hinted());\n        const bamounts = Xutil.concatObjectsToBuffer(this.amounts);\n\n        return Buffer.concat([breceiver, bamounts]);\n    }\n\n    /**\n     * @override\n     * Returns Transfers item dictionary.\n     * @return {object} - Dictionary object: {_hint, receiver, amounts}\n     */\n    dict() {\n        const item = {};\n        item._hint = this.hint;\n        item.receiver = this.receiver.hinted();\n\n        const amounts = [];\n        for (var i = 0; i < this.amounts.length; i++) {\n            amounts.push(\n                this.amounts[i].dict()\n            );\n        }\n        item.amounts = amounts;\n        return item;\n    }\n};\n\n\n/**\n * @class\n * Operation Fact.\n * CreateAccountsFact, KeyUpdaterFact, and TransfersFact extends this class.\n * @property {string} hint - '[ MC_CREATE_ACCOUNTS_OP_FACT | MC_KEYUPDATER_OP_FACT | MC_TRANSFERS_OP_FACT ]-[version]'\n * @property {Date} token - token for fact\n */\nclass OperationFact {\n    /**\n     * @constructor\n     * @param {string} type - [ MC_CREATE_ACCOUNTS_OP_FACT | MC_KEYUPDATER_OP_FACT | MC_TRANSFERS_OP_FACT ]\n     */\n    constructor(type) {\n        this.hint = Xutil._hint(type);\n        this.token = Xutil.getTimeStamp();\n    }\n\n    /**\n     * @abstract\n     * Returns Buffer of fact.\n     * @return {Buffer} - Concatenated Buffer\n     */\n    buffer() {\n        throw '[ERROR] Unimplemented function bytes()';\n    }\n\n\n    /**\n     * @abstract\n     * Returns fact dictionary.\n     * @return {object} - Dictionary object: {_hint, hash, token, ...}\n     */\n    dict() {\n        throw '[ERROR] Unimplemented function dict()';\n    }\n\n    /**\n     * @method\n     * Generates fact hash.\n     */\n    _generateHash() {\n        this.hash = Xutil.sum256(this.buffer());\n    }\n};\n\n\n/**\n * @class\n * @extends OperationFact\n * Fact of Create-Accounts operation.\n * @property {string} hint - 'MC_CREATE_ACCOUNTS_OP_FACT-[version]'\n * @property {Date} token - token for fact\n * @property {Address} sender - Sender address\n * @property {object} items - Array that each element is CreateAccountsItem\n */\nclass CreateAccountsFact extends OperationFact {\n    /**\n     * @constructor\n     * @param {string} sender - Hinted sender address\n     * @param {object} items - Array that each element is CreateAccountsItem\n     */\n    constructor(sender, items) {\n        super(\n            Xhint.MC_CREATE_ACCOUNTS_OP_FACT\n        );\n        this.sender = new Address(sender);\n        this.items = items;\n\n        this._generateHash();\n    }\n\n\n    /**\n     * @override\n     * Concatenates ISO-format-token-Buffer, hinted-sender-Buffer, and every item in items list then\n     * Returns concatenated Buffer.\n     * @return {Buffer} - Concatenated Buffer: ISO-token-Buffer~hinted-sender-Buffer~*item.buffer()\n     */\n    buffer() {\n        const btoken = Buffer.from(this.token.toISOString());\n        const bsender = Buffer.from(this.sender.hinted());\n        const bitems = Xutil.concatObjectsToBuffer(this.items);\n\n        return Buffer.concat([btoken, bsender, bitems]);\n    }\n\n    /**\n     * @override\n     * Returns fact dictionary.\n     * @return {object} - Dictionary object: {_hint, hash, token, sender, items}\n     */\n    dict() {\n        const fact = {};\n        fact._hint = this.hint;\n        fact.hash = bs58.encode(this.hash);\n        fact.token = Buffer.from(this.token.toISOString(), 'utf8').toString('base64');\n        fact.sender = this.sender.hinted();\n\n        const items = [];\n        for (var i = 0; i < this.items.length; i++) {\n            items.push(\n                this.items[i].dict()\n            )\n        }\n        fact.items = items;\n\n        return fact;\n    }\n};\n\n\n/**\n * @class\n * @extends OperationFact\n * Fact of Key-Updater operation.\n * @property {string} hint - 'MC_KEYUPDATER_OP_FACT-[version]'\n * @property {Date} token - token for fact\n * @property {Address} target - Target address\n * @property {string} cid - CurrencyID\n * @property {Xkey.Keys} keys - Keys object for target keys\n */\nclass KeyUpdaterFact extends OperationFact {\n    /**\n     * @operation\n     * @param {string} target - Hinted target address\n     * @param {string} cid - CurrencyID\n     * @param {Xkey.Keys} keys - Keys object for target keys\n     */\n    constructor(target, cid, keys) {\n        super(\n            Xhint.MC_KEYUPDATER_OP_FACT\n        );\n        this.target = new Address(target);\n        this.cid = cid;\n        this.keys = keys;\n\n        this._generateHash();\n    }\n\n    /**\n     * @override\n     * Concatenates ISO-format-token-Buffer, hinted-target-Buffer, keys.buffer(), and cid-Buffer then\n     * Returns concatenated Buffer.\n     * @return {Buffer} - Concatenated Buffer: ISO-token-Buffer~hinted-target-Buffer~keys.buffer()~cid-Buffer\n     */\n    buffer() {\n        const btoken = Buffer.from(this.token.toISOString());\n        const btarget = Buffer.from(this.target.hinted());\n        const bkeys = this.keys.buffer();\n        const bcid = Buffer.from(this.cid);\n\n        return Buffer.concat([btoken, btarget, bkeys, bcid]);\n    }\n\n    /**\n     * @override\n     * Returns fact dictionary.\n     * @return {object} - Dictionary object: {_hint, hash, token, target, keys, currency}\n     */\n    dict() {\n        const fact = {};\n        fact._hint = this.hint;\n        fact.hash = bs58.encode(this.hash);\n        fact.token = Buffer.from(this.token.toISOString(), 'utf8').toString('base64');\n        fact.target = this.target.hinted();\n        fact.keys = this.keys.dict();\n        fact.currency = this.cid;\n        return fact;\n    }\n};\n\n\n/**\n * @class\n * @extends OperationFact\n * Fact of Transfers operation.\n * @property {string} hint - 'MC_TRANSFERS_OP_FACT-[version]'\n * @property {Date} token - token for fact\n * @property {Address} sender - Sender address\n * @property {object} items - Array that each element is TransfersItem\n */\nclass TransfersFact extends OperationFact {\n    /**\n     * @constructor\n     * @param {string} sender - Hinted sender address\n     * @param {object} items - Array that each element is TransfersItem\n     */\n    constructor(sender, items) {\n        super(\n            Xhint.MC_TRANSFERS_OP_FACT\n        );\n        this.sender = new Address(sender);\n        this.items = items;\n\n        this._generateHash();\n    }\n\n    /**\n     * @override\n     * Concatenates ISO-format-token-Buffer, hinted-sender-Buffer, and every item in items list then\n     * Returns concatenated Buffer.\n     * @return {Buffer} - Concatenated Buffer: ISO-token-Buffer~hinted-sender-Buffer~*item.buffer()\n     */\n    buffer() {\n        const btoken = Buffer.from(this.token.toISOString());\n        const bsender = Buffer.from(this.sender.hinted());\n        const bitems = Xutil.concatObjectsToBuffer(this.items);\n\n        return Buffer.concat([btoken, bsender, bitems]);\n    }\n\n\n    /**\n     * @override\n     * Returns fact dictionary.\n     * @return {object} - Dictionary object: {_hint, hash, token, sender, items}\n     */\n    dict() {\n        const fact = {};\n        fact._hint = this.hint;\n        fact.hash = bs58.encode(this.hash);\n        fact.token = Buffer.from(this.token.toISOString(), 'utf8').toString('base64');\n        fact.sender = this.sender.hinted();\n\n        const items = [];\n        for (var i = 0; i < this.items.length; i++) {\n            items.push(\n                this.items[i].dict()\n            );\n        }\n        fact.items = items;\n\n        return fact;\n    }\n};\n\n/**\n * @class\n * Operation for Create-Accounts, Key-Updater and Transfers.\n * @property {string} netID - Network ID\n * @property {string} hint - '[ MC_CREATE_ACCOUNTS_OP | MC_CREATE_KEYUPDATER_OP | MC_TRANSFERS_OP ]-[version]'\n * @property {string} memo - Operation memo\n * @property {OperationFact} fact - [ CreateAccountsFact | KeyUpdaterFact | TransfersFact ]\n * @property {object} fact_signs - Fact signatures # Array that each element is FactSign\n * @property {Buffer} hash - Operation hash\n */\nclass Operation {\n    /**\n     * @constructor\n     * @param {string} netID - Network ID\n     * @param {string} type - [ MC_CREATE_ACCOUNTS_OP | MC_CREATE_KEYUPDATER_OP | MC_TRANSFERS_OP ]\n     * @param {string} memo - Operation memo\n     * @param {OperationFact} fact - [ CreateAccountsFact | KeyUpdaterFact | TransfersFact ]\n     */\n    constructor(netID, type, memo, fact) {\n        this.netID = netID;\n        this.hint = Xutil._hint(type);\n        this.memo = memo;\n        this.fact = fact;\n        this.fact_signs = [];\n        this.hash = undefined;\n    }\n\n    /**\n     * @method\n     * Generate new fact signature.\n     * @param {string} sk - Hinted signing key\n     * @return {Xsign.FactSign} - Generated fact signature\n     */\n    _generateFactSign(sk) {\n        return Xsign.newFactSign(\n            Buffer.concat([\n                this.fact.hash,\n                Buffer.from(this.netID)\n            ]),\n            sk\n        );\n    }\n\n    /**\n     * @method\n     * Generate operation hash.\n     * @return {Buffer} - Buffered operation hash\n     */\n    _generateHash() {\n        this.hash = Xutil.sum256(this.buffer());\n    }\n\n    /**\n     * @method\n     * Add new fact signature to fact_signs, and re-generate operation hash.\n     * @param {string} sk - Hinted signing key\n     */\n    addSign(sk) {\n        this.fact_signs.push(\n            this._generateFactSign(sk, this.netID)\n        );\n        this._generateHash();\n    }\n\n    /**\n     * @method\n     * Concatenates hash-Buffer, every fact_sign.buffer() in fact_signs, and memo-Buffer then\n     * Returns concatenated Buffer.\n     * @return {Buffer} - Concatenated Buffer: hash-Buffer~*fact_sign.buffer()~memo-Buffer\n     */\n    buffer() {\n        if (this.fact_signs.length < 1) {\n            throw '[ERROR] Empty fact sign!'\n        }\n        const bhash = this.fact.hash;\n        const bfact_sg = Xutil.concatObjectsToBuffer(this.fact_signs)\n        const bmemo = Buffer.from(this.memo);\n\n        return Buffer.concat([bhash, bfact_sg, bmemo]);\n    }\n\n    /**\n     * @override\n     * Returns operation dictionary.\n     * @return {object} - Dictionary object: {_hint, memo, fact, hash, fact_signs}\n     */\n    dict() {\n        const oper = {};\n        oper.memo = this.memo;\n        oper._hint = this.hint;\n        oper.fact = this.fact.dict();\n        oper.hash = bs58.encode(this.hash);\n\n        const fact_signs = [];\n        for (var i = 0; i < this.fact_signs.length; i++) {\n            fact_signs.push(\n                this.fact_signs[i].dict()\n            );\n        }\n        oper.fact_signs = fact_signs;\n\n        return oper;\n    }\n};\n\nmodule.exports = {\n    Amount,\n    Address,\n    CreateAccountsItem,\n    TransfersItem,\n    CreateAccountsFact,\n    KeyUpdaterFact,\n    TransfersFact,\n    Operation,\n};\n","class Account {\n    constructor(addr, priv, data) {\n        this.address = addr;\n        this.privateKey = priv;\n        this.resKey = undefined;\n\n        this.publicKeys = data._embedded.keys.keys.map(x => { return { key: x.key, weight: x.weight } });\n        this.balances = data._embedded.balance.map(x => { return { currency: x.currency, amount: x.amount } });\n        this.accountType = this.publicKeys.length > 1 ? 'multi' : 'single';\n    }\n}\n\nexport default Account;","import { operation } from './hint.json';\n\nexport const OPER_CREATE_ACCOUNT = 'OPER-CREATE-ACCOUNT';\nexport const OPER_UPDATE_KEY = 'OPER-UPDATE-KEY';\nexport const OPER_TRANSFER = 'OPER-TRANSFER';\nexport const OPER_DEFAULT = 'OPER-DEFAULT';\n\nexport const PAGE_HOME = 'PAGE-HOMEs'\nexport const PAGE_LOGIN = 'PAGE-LOGIN';\nexport const PAGE_WALLET = 'PAGE-WALLET';\nexport const PAGE_OPER = 'PAGE-OPER';\nexport const PAGE_SIGN = 'PAGE-SIGN';\nexport const PAGE_LOD = 'PAGE-LOD';\nexport const PAGE_RES = 'PAGE-RES';\nexport const PAGE_GEN = 'PAGE-GEN';\n\nexport const SHOW_PRIVATE = 'show-private';\nexport const SHOW_RESTORE = 'show-restore';\n\nexport const TYPE_CREATE_ACCOUNT = operation.create_account + '-' + process.env.REACT_APP_VERSION;\nexport const TYPE_UPDATE_KEY = operation.update_key + '-' + process.env.REACT_APP_VERSION;\nexport const TYPE_TRANSFER = operation.transfer + '-' + process.env.REACT_APP_VERSION;","import { TYPE_CREATE_ACCOUNT, TYPE_TRANSFER } from \"../text/mode\";\nimport { address } from '../text/hint.json';\n\nconst hintedAccount = (account) => {\n    return  account + ':' + address + '-' + process.env.REACT_APP_VERSION\n};\n\nclass History {\n    constructor(history, me) {\n        this.me = me;\n        this.inState = history.in_state;\n        this.confirmedAt = history.confirmed_at;\n        \n        this.operation = history.operation;\n        this.type = history.operation._hint;\n        this.factHash = history.operation.fact.hash;\n\n        this.setItems();\n    }\n\n    setItems(){\n        if(!(this.type === TYPE_CREATE_ACCOUNT || this.type === TYPE_TRANSFER)) {\n            this.items = undefined;\n            return;\n        }\n\n        const items = this.operation.fact.items.map(\n            x => ({\n                receiver: this.type === TYPE_CREATE_ACCOUNT ? hintedAccount(x.keys.hash) : x.receiver,\n                amounts: x.amounts.map(\n                    y => ({\n                        currency: y.currency,\n                        amount: y.amount\n                    })\n                )\n            })\n        );\n\n        this.sender = this.operation.fact.sender;\n        if(this.sender === this.me){\n            this.items = items;\n        }\n        else{\n            this.items = [];\n            for( let i = 0; i < items.length; i++ ){\n                if(items[i].receiver === this.me) {\n                    this.items.push(items[i]);\n                    break;\n                }\n            }\n        }\n    }\n}\n\nexport default History;","import Account from '../../lib/Account';\nimport History from '../../lib/History';\n\nexport const LOGIN = 'LOGIN';\nexport const LOGOUT = 'LOGOUT';\nexport const SET_HISTORY = 'SET_HISTORY';\nexport const CLEAR_HISTORY = 'CLEAR_HISTORY';\n\nexport const SET_OPERATION = 'SET_OPERATION';\nexport const SET_RESPONSE = 'SET_RESPONSE';\n\nexport function login(address, privateKey, data) {\n    const account = new Account(address, privateKey, data);\n    return {\n        type: LOGIN,\n        account: {\n            address: account.address,\n            accountType: account.accountType,\n            publicKeys: account.publicKeys,\n            balances: account.balances,\n            privateKey: account.privateKey,\n            restoreKey: undefined,\n        }\n    }\n}\n\nexport function logout() {\n    return {\n        type: LOGOUT\n    }\n}\n\nexport function setHistory(data, me) {\n    const histories = data._embedded.map(x => new History(x._embedded, me));\n    const splitHistories = [];\n\n    for(let i = 0; i < histories.length; i++){\n        const _i = histories[i];\n        if(!_i.items){\n            continue;\n        }\n        for(let j = 0; j < _i.items.length; j++){\n            const _j = _i.items[j];\n            for(let z = 0; z < _j.amounts.length; z++) {\n                const _z = _j.amounts[z];\n                splitHistories.push({\n                    hash: _i.factHash,\n                    confirmation: _i.inState ? 'SUCCESS' : 'FAIL',\n                    direction: me === _i.sender ? 'SEND' : 'RECEIVE',\n                    confirmedAt: _i.confirmedAt,\n                    target: me === _i.sender ? _j.receiver : _i.sender,\n                    currency: _z.currency,\n                    amount: _z.amount\n                })\n            }\n        }\n    }\n\n    return {\n        type: SET_HISTORY,\n        history: splitHistories\n    }\n}\n\nexport function clearHistory() {\n    return {\n        type: CLEAR_HISTORY\n    }\n}\n\nexport function setOperation(operation, json) {\n    return {\n        type: SET_OPERATION,\n        operation,\n        json,\n    }\n}\n\nexport function setResponse(isBroadcast, isStateIn, res, status, data) {\n    return {\n        type: SET_RESPONSE,\n        isBroadcast,\n        isStateIn,\n        res,\n        status,\n        data,\n    }\n}","import * as actions from '../actions';\n\nconst initialState = {\n    isLogin: false,\n    account: undefined,\n    history: undefined\n}\n\nexport const reducer = (state = initialState, action) => {\n    switch (action.type) {\n        case actions.LOGIN:\n            return {\n                ...state,\n                isLogin: true,\n                account: action.account\n            }\n        case actions.LOGOUT:\n            return {\n                ...state,\n                isLogin: false,\n                account: undefined\n            }\n        case actions.SET_HISTORY:\n            return {\n                ...state,\n                history: action.history\n            }\n        case actions.CLEAR_HISTORY:\n            return {\n                ...state,\n                history: undefined\n            }\n        default:\n            return state;\n    }\n}","function download(json) {\n    if (!json || !Object.prototype.hasOwnProperty.call(json, 'hash')) {\n        return undefined;\n    }\n\n    let file;\n    try {\n        file = new File([JSON.stringify(json, null, 4)], `${json.hash}`, { type: 'application/json' });\n    } catch (e) {\n        alert('JSON 파일 다운로드 url을 얻을 수 없습니다. :(');\n        return undefined;\n    }\n\n    return URL.createObjectURL(file);\n}\n\nexport default download;","import * as actions from '../actions';\nimport * as mode from '../../text/mode'; \nimport download from '../../lib/Url';\n\nconst initialState = {\n    operation: mode.OPER_DEFAULT,\n    json: {},\n    data: [],\n    download: undefined,\n    filename: \"\",\n    isBroadcast: false,\n    isStateIn: false,\n    res: undefined,\n    status: 400\n}\n\nexport const reducer = (state = initialState, action) => {\n    switch (action.type) {\n        case actions.SET_OPERATION:\n            if(action.operation === mode.OPER_DEFAULT){\n                return initialState;\n            }\n            return {\n                ...state,\n                operation: action.operation,\n                json: action.json,\n                download: download(action.json),\n                filename: action.json.hash\n            }\n        case actions.SET_RESPONSE:\n            return {\n                ...state,\n                isBroadcast: action.isBroadcast,\n                isStateIn: action.isStateIn,\n                res: action.res,\n                status: action.status,\n                data: action.data,\n            }\n        default:\n            return state;\n    }\n}","import { combineReducers } from 'redux';\nimport { reducer as loginReducer } from './LoginReducer';\nimport { reducer as operationReducer } from './OperationReducer';\n\nconst rootReducer = combineReducers({\n    login: loginReducer,\n    operation: operationReducer\n});\n\nexport default rootReducer;","import { createStore } from \"redux\";\n\nimport rootReducer from \"./reducers\";\n\nconst store = createStore(\n    rootReducer,\n    {}\n);\nexport default store;","export default __webpack_public_path__ + \"static/media/logo_trans.39b47b2b.png\";","import React from 'react';\nimport './Home.scss';\n\nimport logo_trans from '../image/logo_trans.png';\nimport { Redirect } from 'react-router-dom';\n\nclass Home extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isRedirect: false\n        };\n    }\n\n    onClick() {\n        this.setState({\n            isRedirect: true\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"home-container\">\n                { this.state.isRedirect ? <Redirect to=\"/login\" /> : false }\n                <div className=\"home-wrapper\"\n                    onClick={() => this.onClick()}>\n                    <div className=\"home-title-wrapper\">\n                        <img src={logo_trans} alt=\"logo\" />\n                        <div className=\"home-title\">\n                            <h1>MITUM WEB WALLET</h1>\n                        </div>\n                    </div>\n                    <div className=\"home-open\">OPEN WALLET</div>\n                </div>\n            </div>\n        );\n    }\n}\n\n\nexport default Home;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './SmallButton.scss';\n\nfunction SmallButton(props) {\n    return (\n        <button className=\"small-button draw-border\"\n            style={{ display: props.visible ? \"inherit\" : \"none\" }}\n            disabled={props.disabled ? true : false}\n            onClick={props.onClick}>\n            {props.children}\n        </button>\n    );\n}\n\nSmallButton.propTypes = {\n    onClick: PropTypes.func.isRequired,\n    visible: PropTypes.bool,\n    disabled: PropTypes.bool\n}\n\nexport default SmallButton;","import React from 'react';\nimport copy from 'copy-to-clipboard';\n\nimport PropTypes from 'prop-types';\nimport './InputBox.scss';\n\nimport SmallButton from './buttons/SmallButton';\n\nclass InputBox extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            value: \"\"\n        };\n    }\n\n    onChange(e) {\n        this.setState({\n            value: e.target.value\n        });\n    }\n\n    render() {\n        return (\n            <div className={\"box \" + this.props.size}>\n                <input className='input-box'\n                    type=\"text\"\n                    name=\"input-box\"\n                    autoComplete=\"off\"\n                    value={this.state.value ? this.state.value : this.props.value}\n                    disabled={this.props.disabled}\n                    onChange={this.props.onChange ? this.props.onChange : () => this.onChange()}\n                    placeholder={this.props.placeholder ? this.props.placeholder : \"\"} />\n                <SmallButton\n                    visible={this.props.useCopy}\n                    onClick={() => {\n                        copy(this.props.value);\n                        alert('copied!');\n                    }} >COPY</SmallButton>\n            </div>\n        )\n    }\n}\n\nInputBox.propTypes = {\n    size: PropTypes.string.isRequired,\n    useCopy: PropTypes.bool.isRequired,\n    disabled: PropTypes.bool,\n    value: PropTypes.string,\n    onChange: PropTypes.func,\n    placeholder: PropTypes.string\n}\n\nexport default InputBox;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './ConfirmButton.scss';\n\nclass ConfirmButton extends React.Component {\n    render() {\n        return (\n            <button className=\"confirm-button\"\n                style={{ opacity: this.props.disabled ? 0.4 : 1.0 }}\n                onClick={this.props.onClick}\n                disabled={this.props.disabled ? true : false}>\n                {this.props.children}\n            </button>\n        );\n    }\n}\n\nConfirmButton.propTypes = {\n    onClick: PropTypes.func.isRequired,\n    disabled: PropTypes.bool\n}\n\nexport default ConfirmButton;","import React from 'react';\n\nimport './PrivateKeyLoginBox.scss';\n\nimport InputBox from './InputBox';\nimport ConfirmButton from './buttons/ConfirmButton';\n\nclass PrivateKeyLoginBox extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            privateKey: \"\",\n            account: \"\",\n            data: undefined,\n        }\n    }\n\n    onChangePrivate(e) {\n        this.setState({\n            privateKey: e.target.value\n        });\n    }\n\n    onChangeAddress(e) {\n        this.setState({\n            account: e.target.value\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"private-login-container\">\n                <div className=\"private-input-container\">\n                    <InputBox disabled={false} useCopy={false} size=\"big\"\n                        onChange={(e) => { this.onChangeAddress(e) }}\n                        value={this.state.account}\n                        placeholder=\"account address\" \n                        label=\"Account Address\"/>\n                    <InputBox disabled={false} useCopy={false} size=\"big\"\n                        onChange={(e) => this.onChangePrivate(e)}\n                        value={this.state.privateKey}\n                        placeholder=\"private key\"\n                        label=\"Private Key\"/>\n                </div>\n                <ConfirmButton\n                    disabled={!(this.state.privateKey && this.state.account) ? true : false}\n                    onClick={() => {\n                        this.props.onLogin(this.state.account.trim(), this.state.privateKey.trim());\n                    }}>Open</ConfirmButton>\n            </div>\n        )\n    }\n}\nexport default PrivateKeyLoginBox;","import React from 'react';\n\nclass RestoreKeyLoginBox extends React.Component {\n    render() {\n        return (\n            <div>RestoreKeyLoginBox</div>\n        )\n    }\n}\nexport default RestoreKeyLoginBox;","import React from 'react';\nimport { Redirect, withRouter } from 'react-router-dom';\nimport axios from 'axios';\nimport './Login.scss';\n\nimport PrivateKeyLoginBox from '../components/PrivateKeyLoginBox';\nimport RestoreKeyLoginBox from '../components/RestoreKeyLoginBox';\n\nimport { clearHistory, login, setHistory } from '../store/actions';\nimport { connect } from 'react-redux';\n\nimport { toKeypair } from 'mitumc';\nimport { SHOW_PRIVATE, SHOW_RESTORE } from '../text/mode';\n\nconst getAccountInformation = async (account) => {\n    return await axios.get(process.env.REACT_APP_API_ACCOUNT + account);\n}\n\nconst getAccountHistory = async (account) => {\n    return await axios.get(`${process.env.REACT_APP_API_ACCOUNT}${account}/operations`);\n}\n\nclass Login extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            mode: SHOW_PRIVATE,\n            isPriv: true,\n            isActive: false\n        }\n    }\n\n    onLogin(addr, priv) {\n        let pubKey;\n\n        try {\n            pubKey = toKeypair(priv, '').getPublicKey();\n        } catch (e) {\n            alert('지갑 열기 실패! :(\\n유효하지 않은 비밀키입니다.');\n            return;\n        }\n\n        getAccountHistory(addr)\n            .then(\n                res => {\n                    this.props.setHistory(res.data, addr);\n                }\n            )\n            .catch(\n                e => {\n                    alert('트랜잭션 이력 조회 실패! :(\\n잠시 후 다시 시도해보세요.')\n                    console.log(e);\n                }\n            )\n\n        getAccountInformation(addr)\n            .then(\n                res => {\n                    const pubKeys = res.data._embedded.keys.keys.map(x => x.key);\n                    for (let i = 0; i < pubKeys.length; i++) {\n                        if (pubKeys[i] === pubKey) {\n                            this.props.signIn(addr, priv, res.data);\n                            return;\n                        }\n                    }\n                    alert(`지갑 열기 실패! :(\\n계정 [${addr}]의 멤버에 해당 키가 존재하지 않습니다.`);\n                }\n            )\n            .catch(\n                e => {\n                    console.log(e);\n                    alert(`지갑 열기 실패! :(\\n계정 조회에 실패하였습니다. 잠시 후 다시 시도해보세요.`);\n                }\n            );\n    }\n\n    onChange() {\n        const radio = document.querySelector(\"input[type=radio]:checked\").value;\n\n        if (this.state.isActive) {\n            this.setState({\n                mode: radio\n            });\n        }\n        else return;\n    }\n\n    renderForm() {\n        const { mode } = this.state;\n        switch (mode) {\n            case SHOW_PRIVATE:\n                return <PrivateKeyLoginBox\n                    onLogin={(addr, priv) => this.onLogin(addr, priv)} />;\n            case SHOW_RESTORE:\n                return <RestoreKeyLoginBox />;\n            default:\n                return <PrivateKeyLoginBox\n                    onLogin={(addr, priv) => this.onLogin(addr, priv)} />;\n        }\n    }\n\n    onClick() {\n        if (this.state.isActive) {\n            this.setState({\n                isPriv: !this.state.isPriv\n            });\n        }\n        else return;\n    }\n\n    render() {\n        if (this.props.isLogin) {\n            this.onLogin(this.props.account.address, this.props.account.privateKey);\n        }\n\n        return (\n            <div className=\"login-container\">\n                <h1>OPEN WALLET</h1>\n                {this.props.history && this.props.isLogin ? <Redirect to={`/wallet/${this.props.account.address}`} /> : false}\n                <div className=\"login-radio\" style={this.state.isActive ? {} : { display: \"none\" }}>\n                    <label className=\"rad-label\">\n                        <input type=\"radio\" className=\"rad-input\" value={SHOW_PRIVATE} name=\"rad\"\n                            onChange={() => this.onChange()} onClick={() => this.onClick()} checked={this.state.isPriv} />\n                        <div className=\"rad-design\"></div>\n                        <div className=\"rad-text\">Private Key</div>\n                    </label>\n\n                    <label className=\"rad-label\">\n                        <input type=\"radio\" className=\"rad-input\" value={SHOW_RESTORE} name=\"rad\"\n                            onChange={() => this.onChange()} onClick={() => this.onClick()} checked={!this.state.isPriv} />\n                        <div className=\"rad-design\"></div>\n                        <div className=\"rad-text\">Restore Key</div>\n                    </label>\n                </div>\n                {this.renderForm()}\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => ({\n    isLogin: state.login.isLogin,\n    account: state.login.account,\n    history: state.login.history\n});\n\nconst mapDispatchToProps = dispatch => ({\n    signIn: (address, privateKey, data) => dispatch(login(address, privateKey, data)),\n    setHistory: (data, me) => dispatch(setHistory(data, me)),\n    clearHistory: () => dispatch(clearHistory())\n});\n\nexport default withRouter(connect(\n    mapStateToProps,\n    mapDispatchToProps,\n)(Login));","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './SelectButton.scss';\n\nclass SelectButton extends React.Component {\n    render() {\n        return (\n            <button className=\"select-button\"\n                onClick={this.props.onClick}>\n                {this.props.children}\n            </button>\n        );\n    }\n}\n\nSelectButton.propTypes = {\n    onClick: PropTypes.func.isRequired\n}\n\nexport default SelectButton;","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport copy from 'copy-to-clipboard';\n\nimport \"./PublicKeyModal.scss\";\n\nconst key = (k) => {\n    return (\n        <li key={k}\n            onClick={() => {\n                copy(k);\n                alert('copied');\n            }}>{k}</li>\n    );\n}\n\nclass PublicKeyModal extends React.Component {\n\n    render() {\n        const { isOpen, onClose, account } = this.props;\n        return (\n            <div className={isOpen ? 'openModal modal' : 'modal'}>\n                {isOpen ? (\n                    <section>\n                        <header>\n                            Public Key List\n                            <button className=\"close\" onClick={onClose}> &times; </button>\n                        </header>\n                        <main>\n                            <ul>\n                                {account.publicKeys.map(x => key(x.key))}\n                            </ul>\n                        </main>\n                    </section>\n                ) : null}\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    account: state.login.account\n});\n\nexport default withRouter(connect(\n    mapStateToProps,\n    null\n)(PublicKeyModal));","export const isOperation = (json) => {\n\n    if (!json) { return false; }\n\n    if (!Object.prototype.hasOwnProperty.call(json, 'hash') || !json.hash) {\n        return false;\n    }\n\n    if (!Object.prototype.hasOwnProperty.call(json, 'memo')) {\n        return false;\n    }\n\n    if (!Object.prototype.hasOwnProperty.call(json, 'fact') || !json.fact) {\n        return false;\n    }\n\n    if (!Object.prototype.hasOwnProperty.call(json, 'fact_signs') || !json.fact_signs) {\n        return false;\n    }\n\n    const signatures = json.fact_signs.map(x => x.signatures);\n    if (signatures.length < 1) {\n        return false;\n    }\n\n    return true;\n}\n\nexport const isStateValid = (state) => {\n\n    if (!state) {\n        return false;\n    }\n\n    if (!Object.prototype.hasOwnProperty.call(state, 'location') || !state.location) {\n        return false;\n    }\n\n    if (!Object.prototype.hasOwnProperty.call(state.location, 'state') || !state.location.state) {\n        return false;\n    }\n\n    return true;\n}\n\nexport const isResponseValid = (state) => {\n\n    if (!state) {\n        return false;\n    }\n\n    if (!Object.prototype.hasOwnProperty.call(state, 'res') || !state.res) {\n        return false;\n    }\n\n    if (!Object.prototype.hasOwnProperty.call(state, 'status') || !state.status) {\n        return false;\n    }\n\n    if (!Object.prototype.hasOwnProperty.call(state, 'operation') || !state.operation) {\n        return false;\n    }\n\n    if (!Object.prototype.hasOwnProperty.call(state, 'data')) {\n        return false;\n    }\n\n    return true;\n}\n\nexport const isAccountValid = (account) => {\n\n    if (!account) {\n        return false;\n    }\n\n    if (!Object.prototype.hasOwnProperty.call(account, 'address') || !account.address) {\n        return false;\n    }\n\n    if (!Object.prototype.hasOwnProperty.call(account, 'accountType') || !account.accountType) {\n        return false;\n    }\n\n    if (!Object.prototype.hasOwnProperty.call(account, 'publicKeys') || !account.publicKeys) {\n        return false;\n    }\n\n    if (!Object.prototype.hasOwnProperty.call(account, 'balances') || !account.balances) {\n        return false;\n    }\n\n    if (!Object.prototype.hasOwnProperty.call(account, 'privateKey') || !account.privateKey) {\n        return false;\n    }\n\n    // if (!Object.prototype.hasOwnProperty.call(account, 'restoreKey') || !account.restoreKey) {\n    //     return false;\n    // }\n\n    return true;\n}","import React, { createRef } from 'react';\nimport { Redirect, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { login } from '../store/actions';\nimport './Wallet.scss';\n\nimport copy from 'copy-to-clipboard';\n\nimport SelectButton from '../components/buttons/SelectButton';\nimport PublicKeyModal from '../components/modals/PublicKeyModal';\n\nimport * as mode from '../text/mode';\nimport { isAccountValid } from '../lib/Validation';\n\nconst balance = (bal) => {\n    return (\n        <li key={bal.currency}>\n            <p className=\"currency\">{bal.currency}</p>\n            <p className=\"amount\">{bal.amount}</p>\n        </li>\n    );\n}\n\nconst history = (hist) => {\n    return (\n        <li key={hist.hash + hist.target} onClick={() => {\n            copy(hist.hash);\n            alert('fact hash copied');\n        }}>\n            <p id={hist.confirmation}>{hist.confirmation}</p>\n            <p id={hist.direction}>{hist.direction}</p>\n            <p id='confirmed-at'>{hist.confirmedAt}</p>\n            <p id='target'>{hist.target}</p>\n            <p id='currency'>{hist.currency}</p>\n            <p id='amount'>{hist.amount}</p>\n        </li>\n    );\n}\n\nconst titleStyle = {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: '100%',\n    margin: '0',\n    padding: '0'\n}\nconst lineStyle = {\n    width: '100%',\n    border: '2px solid white',\n    verticalAlign: 'middle',\n}\n\nconst title = (content) => {\n    return (\n        <div style={titleStyle}>\n            <div style={lineStyle}></div>\n            <p style={{\n                width: '100%',\n                textAlign: 'center',\n                verticalAlign: 'middle',\n                fontWeight: '400',\n                fontSize: '1.5em'\n            }}>{content}</p>\n            <div style={lineStyle}></div>\n        </div>\n    )\n}\n\nclass Wallet extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.walletRef = createRef();\n\n        this.state = {\n            restoreKey: undefined,\n\n            isModalOpen: false,\n\n            isRedirect: this.props.isLogin ? false : true,\n            redirect: this.props.isLogin ? undefined : mode.PAGE_LOGIN,\n            operation: undefined\n        }\n    }\n\n    onMoreClick() {\n        this.setState({\n            isDetailVisible: !this.state.isDetailVisible\n        });\n    }\n\n    onShowClick(target) {\n        if (target === mode.SHOW_PRIVATE) {\n            this.setState({\n                isPrivVisible: !this.state.isPrivVisible\n            })\n        }\n        else if (target === mode.SHOW_RESTORE) {\n            this.setState({\n                isResVisible: !this.state.isResVisible\n            })\n        }\n        else {\n            return;\n        }\n    }\n\n    onSelect(oper) {\n        if (oper === mode.OPER_CREATE_ACCOUNT\n            || oper === mode.OPER_UPDATE_KEY\n            || oper === mode.OPER_TRANSFER) {\n            this.setState({\n                isRedirect: true,\n                redirect: mode.PAGE_OPER,\n                operation: oper\n            });\n        }\n    }\n\n    renderRedirect() {\n        if (!this.props.account || !isAccountValid(this.props.account)) {\n            return <Redirect to=\"/login\" />;\n        }\n\n        if (!this.state.isRedirect) {\n            return false;\n        }\n\n        switch (this.state.redirect) {\n            case mode.PAGE_OPER:\n                return <Redirect to={{\n                    pathname: '/operation',\n                    state: {\n                        operation: this.state.operation,\n                    }\n                }} />;\n            case mode.PAGE_LOGIN:\n                return <Redirect to='/login' />\n            default: return false;\n        }\n    }\n\n    componentDidMount() {\n        this.scrollToAccount();\n    }\n\n    componentDidUpdate() {\n        this.scrollToAccount();\n    }\n\n    scrollToAccount = () => {\n        if (this.walletRef.current) {\n            this.walletRef.current.scrollIntoView({ behavior: 'smooth' });\n        }\n    }\n\n    refresh() {\n        this.setState({\n            isRedirect: true,\n            redirect: mode.PAGE_LOGIN\n        })\n    }\n\n    closeModal() {\n        this.setState({ isModalOpen: false });\n    }\n\n    openModal() {\n        this.setState({ isModalOpen: true });\n    }\n\n    render() {\n        return (\n            <div className=\"wallet-container\">\n                {this.renderRedirect()}\n                <span className=\"wallet-refresh\" >\n                    <p onClick={() => this.refresh()}>⟳</p>\n                </span>\n                <div className=\"wallet-ref\" ref={this.walletRef}></div>\n                <div className=\"wallet-info\">\n                    {title(\"ADDRESS\" + (this.props.account.accountType === \"multi\" ? \" - MULTI\" : \" - SINGLE\"))}\n                    <p id='address' onClick={() => this.openModal()}>{this.props.account.address}</p>\n                    <section className=\"wallet-amount\">\n                        {title('BALANCE')}\n                        <ul>\n                            {this.props.account.balances ? this.props.account.balances.map(x => balance(x)) : false}\n                        </ul>\n                    </section>\n                </div>\n                <div className=\"wallet-operation\">\n                    <SelectButton size=\"wide\" onClick={() => this.onSelect(mode.OPER_CREATE_ACCOUNT)}>CREATE ACCOUNT</SelectButton>\n                    <SelectButton size=\"wide\" onClick={() => this.onSelect(mode.OPER_UPDATE_KEY)}>UPDATE KEY</SelectButton>\n                    <SelectButton size=\"wide\" onClick={() => this.onSelect(mode.OPER_TRANSFER)}>TRANSFER</SelectButton>\n                </div>\n                <div className=\"wallet-history\">\n                    {title('HISTORY')}\n                    <ul>\n                        {this.props.history.map(x => history(x))}\n                    </ul>\n                </div>\n                <PublicKeyModal onClose={() => this.closeModal()} isOpen={this.state.isModalOpen} />\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => ({\n    isLogin: state.login.isLogin,\n    account: state.login.account,\n    history: state.login.history\n});\n\nconst mapDispatchToProps = dispatch => ({\n    signIn: (address, privateKey, data) => dispatch(login(address, privateKey, data)),\n});\n\nexport default withRouter(connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Wallet));","import React from 'react';\nimport './KeyGen.scss';\n\nimport SelectButton from '../components/buttons/SelectButton';\nimport InputBox from '../components/InputBox';\n\nimport { version, key } from \"../text/hint.json\";\n\nimport { getKeypair } from 'mitumc';\n\n\nconst KEY_BTC = \"btc\";\nconst KEY_ETHER = \"ether\";\nconst KEY_STELLAR = \"stellar\";\n\nclass KeyGen extends React.Component {\n    state = {\n        privKey: \"\",\n        pubKey: \"\",\n    }\n\n    getKey(_type) {\n        const keypair = getKeypair(_type);\n\n        let privateKey = keypair.privKey.key + ':';\n        let publicKey = keypair.pubKey + ':';\n\n        switch (_type) {\n            case KEY_BTC:\n                privateKey += key.btc.priv;\n                publicKey += key.btc.pub;\n                break;\n            case KEY_ETHER:\n                privateKey += key.ether.priv;\n                publicKey += key.ether.pub;\n                break;\n            case KEY_STELLAR:\n                privateKey += key.stellar.priv;\n                publicKey += key.stellar.pub;\n                break;\n            default: throw new Error(\"Invalid key type\");\n        }\n\n        privateKey += '-' + version;\n        publicKey += '-' + version;\n\n        this.setState({\n            privKey: privateKey,\n            pubKey: publicKey\n        })\n    }\n\n    render() {\n        return (\n            <div className=\"key-gen-container\">\n                <div className=\"key-selector\">\n                    <SelectButton onClick={() => this.getKey(KEY_BTC)}>BTC</SelectButton>\n                    <SelectButton onClick={() => this.getKey(KEY_ETHER)}>ETHER</SelectButton>\n                    <SelectButton onClick={() => this.getKey(KEY_STELLAR)}>STELLAR</SelectButton>\n                </div>\n                <div className=\"key-boxer\">\n                    <InputBox label=\"Private Key\" disabled={true} useCopy={true} size=\"big\" value={this.state.privKey} />\n                    <InputBox label=\"Public Key\" disabled={true} useCopy={true} size=\"big\" value={this.state.pubKey} />\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default KeyGen;","import React from 'react';\nimport './ResKeyGen.scss';\n\nfunction ResKeyGen() {\n    return (\n        <div className=\"res-container\">\n            <h1>ResKeyGen</h1>\n        </div>\n    );\n}\n\nexport default ResKeyGen;","import React from 'react';\nimport './Help.scss';\n\nclass Help extends React.Component {\n    render() {\n        return (\n            <div className=\"help-container\">\n                <h1>Help</h1>\n            </div>\n        );\n    }\n}\n\nexport default Help;","import React from 'react';\nimport { connect } from 'react-redux';\nimport { setResponse } from '../../store/actions';\nimport axios from 'axios';\nimport { Redirect, withRouter } from 'react-router-dom';\n\nimport \"./OperationConfirm.scss\";\nimport { isOperation } from '../../lib/Validation';\n\nimport { OPER_CREATE_ACCOUNT, OPER_UPDATE_KEY, OPER_TRANSFER } from '../../text/mode';\nimport hint from '../../text/hint.json';\n\nconst broadcast = async (operation) => {\n    if (!isOperation(operation)) {\n        return undefined;\n    }\n\n    return await axios.post(process.env.REACT_APP_API_BROADCAST, operation);\n}\n\nclass OperationConfirm extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isRedirect: false,\n        }\n    }\n\n    onSend(json) {\n        broadcast(json).then(\n            res => {\n                if (res.request.status === 200) {\n                    let data = undefined;\n                    switch (this.props.operation) {\n                        case OPER_CREATE_ACCOUNT:\n                            data = json.fact.items.map(x => x.keys.hash + ':' + hint.address + '-' + process.env.REACT_APP_VERSION);\n                            break;\n                        case OPER_UPDATE_KEY:\n                            data = json.fact.hash;\n                            break;\n                        case OPER_TRANSFER:\n                        default:\n                            data = undefined;\n                    }\n                    this.props.setResult(true, false, res.data, 200, data);\n                }\n                else {\n                    this.props.setResult(false, false, res.data, res.request.status, undefined);\n                }\n                this.setState({ isRedirect: true });\n            }\n        ).catch(\n            e => {\n                this.props.setResult(false, false, e.response.data, e.response.data.status, undefined);\n                this.setState({ isRedirect: true });\n                alert('작업을 전송할 수 없습니다.\\n네트워크를 확인해주세요.');\n            }\n        );\n    }\n\n    renderRedirect() {\n        const { operation } = this.props;\n        switch (operation) {\n            case OPER_CREATE_ACCOUNT:\n            case OPER_TRANSFER:\n                return <Redirect to='/response'/>;\n            case OPER_UPDATE_KEY:\n                return <Redirect to='/loading'/>;\n            default:\n                alert('잘못된 작업입니다!\\n지갑 페이지로 이동합니다.');\n                return <Redirect to='/login' />;\n        }\n    }\n\n    render() {\n        const { isOpen, onClose, json, filename, download } = this.props;\n        return (\n            <div className={isOpen ? 'openModal modal' : 'modal'}>\n                {this.state.isRedirect ? this.renderRedirect() : false}\n                {isOpen ? (\n                    <section>\n                        <header>\n                            이 작업을 전송하겠습니까?\n                            <button className=\"close\" onClick={onClose}> &times; </button>\n                        </header>\n                        <main>\n                            <p>전송 버튼을 누른 후에는 작업을 되돌릴 수 없습니다. 작업 내용이 정확한가요?</p>\n                            <span>\n                                <p className=\"modal-button\" id=\"no\" onClick={onClose}>{\"취소!:(\"}</p>\n                                <a className=\"modal-button\" id=\"no\" target=\"_blank\" download={`${filename}.json`}\n                                    href={download} rel=\"noreferrer\">\n                                    {\"JSON 파일 다운로드!:[\"}\n                                </a>\n                                <p className=\"modal-button\" id=\"yes\" onClick={() => this.onSend(json)}>{\"전송!:)\"}</p>\n                            </span>\n                        </main>\n                    </section>\n                ) : null}\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    operation: state.operation.operation,\n    json: state.operation.json,\n    download: state.operation.download,\n    filename: state.operation.filename,\n    data: state.operation.data,\n    res: state.operation.res,\n    status: state.operation.status,\n});\n\nconst mapDispatchToProps = dispatch => ({\n    setResult: (isBroadcast, isStateIn, res, status, data) => dispatch(setResponse(isBroadcast, isStateIn, res, status, data)),\n});\n\nexport default withRouter(connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(OperationConfirm));","import React from 'react';\nimport { key } from './SubInfo';\nimport './Keys.scss';\n\nfunction Keys({ keys, title }) {\n    return (\n        <section className='key-container'>\n            <p id='head'>{title}</p>\n            <div className='label'>\n                <p id='key'>KEY</p>\n                <p id='weight'>WEIGHT</p>\n            </div>\n            <ul>\n                {keys ? keys.map(x => key(x)) : false}\n            </ul>\n        </section>\n    );\n}\n\nexport default Keys;","export const balance = x => {\n    return (\n        <li key={x.currency}>\n            <p id='currency'>{x.currency}</p>\n            <p id='amount'>{x.amount}</p>\n        </li>\n    );\n}\n\nexport const key = x => {\n    return (\n        <li key={x.key}>\n            <p id='key'>{x.key}</p>\n            <p id='weight'>{x.weight}</p>\n        </li>\n    );\n}","import React from 'react';\nimport { balance } from './SubInfo';\nimport './Balances.scss';\n\nfunction Balances({ balances, title, labeled }) {\n    return (\n        <section className='balance-container'>\n            <p id='head'>{title}</p>\n            {labeled ? (\n                <div className='label'>\n                    <p id='currency'>CURRENCY ID</p>\n                    <p id='amount'>AMOUNT</p>\n                </div>\n            ) : false}\n            <ul className={labeled ? 'wide' : 'slim'}>\n                {balances ? balances.map(x => balance(x)) : false}\n            </ul>\n        </section>\n    );\n}\n\nexport default Balances;","import React from 'react';\nimport SmallButton from '../buttons/SmallButton';\nimport InputBox from '../InputBox';\nimport './KeyAdder.scss';\n\nfunction KeyAdder(props) {\n\n    const { onKeyChange, onWeightChange, onAdd, isAddDisabled, pub, weight, useThres } = props;\n\n    return (\n        <section className='key-adder-container'>\n            <div className=\"key-adder\">\n                <InputBox size=\"medium\" useCopy={false} disabled={false} placeholder=\"public key\"\n                    value={pub}\n                    onChange={onKeyChange} />\n                <InputBox size=\"small\" useCopy={false} disabled={false} placeholder=\"weight\"\n                    value={weight}\n                    onChange={onWeightChange} />\n                <SmallButton\n                    visible={true}\n                    disabled={isAddDisabled}\n                    onClick={onAdd}>ADD</SmallButton>\n            </div>\n            {useThres\n                ? (\n                    <div className=\"thres-adder\">\n                        <p>THRESHOLD:</p>\n                        <InputBox\n                            size=\"small\" useCopy={false} disabled={false} placeholder='threshold'\n                            value={props.thres}\n                            onChange={props.onThresChange} />\n                    </div>\n                )\n                : false\n            }\n        </section>\n    );\n}\n\nexport default KeyAdder;","import React from 'react';\nimport SmallButton from '../buttons/SmallButton';\nimport InputBox from '../InputBox';\nimport './AmountAdder.scss';\n\nfunction AmountAdder(props) {\n\n    const { onCurrencyChange, onAmountChange, currency, amount, isAddDisabled, onAdd } = props;\n\n    return (\n        <section className='amount-adder-container'>\n            <div className=\"amount-adder\">\n                <InputBox\n                    size=\"small\" useCopy={false} disabled={false} placeholder=\"currency\"\n                    onChange={onCurrencyChange}\n                    value={currency} />\n                <InputBox\n                    size=\"medium\" useCopy={false} disabled={false} placeholder=\"amount\"\n                    value={amount}\n                    onChange={onAmountChange} />\n                <SmallButton\n                    visible={true}\n                    disabled={isAddDisabled}\n                    onClick={onAdd}>ADD</SmallButton>\n            </div>\n        </section>\n    );\n}\n\nexport default AmountAdder;","import React, { createRef } from 'react';\nimport { Redirect, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { setOperation } from '../../store/actions';\n\nimport './CreateAccount.scss';\n\nimport ConfirmButton from '../buttons/ConfirmButton';\n\nimport OperationConfirm from '../modals/OperationConfirm';\n\nimport Keys from '../infos/Keys';\nimport Balances from '../infos/Balances';\n\nimport KeyAdder from '../adders/KeyAdder';\nimport AmountAdder from '../adders/AmountAdder';\n\nimport { Generator } from 'mitumc';\n\nimport { OPER_CREATE_ACCOUNT } from '../../text/mode';\n\nclass CreateAccount extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.createdRef = createRef();\n        this.titleRef = createRef();\n\n        if (!Object.prototype.hasOwnProperty.call(this.props, 'account') || !this.props.account) {\n            this.state = { isRedirect: true }\n            return;\n        }\n\n        this.state = {\n            isRedirect: false,\n\n            keys: [],\n            amounts: [],\n            threshold: \"\",\n\n            publicKey: \"\",\n            weight: \"\",\n            currency: \"\",\n            amount: \"\",\n\n            isModalOpen: false,\n        }\n    }\n\n    closeModal() {\n        this.setState({ isModalOpen: false })\n    }\n\n    onClick() {\n        try {\n            const generator = new Generator(process.env.REACT_APP_NETWORK_ID);\n            const account = this.props.account;\n\n            const keys = generator.createKeys(\n                this.state.keys.map(x =>\n                    generator.formatKey(x.key, parseInt(x.weight))),\n                parseInt(this.state.threshold)\n            );\n\n            const amounts = generator.createAmounts(\n                this.state.amounts.map(x =>\n                    generator.formatAmount(parseInt(x.amount), x.currency))\n            );\n\n            const createAccountsFact = generator.createCreateAccountsFact(\n                account.address,\n                [generator.createCreateAccountsItem(\n                    keys, amounts\n                )]\n            );\n\n            const createAccounts = generator.createOperation(createAccountsFact, \"\");\n            createAccounts.addSign(account.privateKey);\n\n            const created = createAccounts.dict();\n\n            this.props.setJson(created);\n            this.setState({ isModalOpen: true });\n        }\n        catch (e) {\n            console.log(e);\n            alert('작업을 생성할 수 없습니다. :(\\n입력하신 작업 내용을 확인해주세요~');\n        }\n    }\n\n    onChangePub(e) {\n        this.setState({\n            publicKey: e.target.value\n        });\n    }\n\n    onChangeWeight(e) {\n        this.setState({\n            weight: e.target.value\n        });\n    }\n\n    onChangeCurrency(e) {\n        this.setState({\n            currency: e.target.value\n        });\n    }\n\n    onChangeAmount(e) {\n        this.setState({\n            amount: e.target.value\n        });\n    }\n\n    onChangeThres(e) {\n        this.setState({\n            threshold: e.target.value\n        });\n    }\n\n    addKey() {\n        this.setState({\n            keys: [...this.state.keys, {\n                key: this.state.publicKey,\n                weight: this.state.weight\n            }],\n            publicKey: \"\",\n            weight: \"\",\n        });\n    }\n\n    addAmount() {\n        this.setState({\n            amounts: [...this.state.amounts, {\n                currency: this.state.currency,\n                amount: this.state.amount\n            }],\n            currency: \"\",\n            amount: \"\"\n        });\n    }\n\n    componentDidMount() {\n        this.scrollToInput();\n    }\n\n    componentDidUpdate() {\n        this.scrollToInput();\n    }\n\n    scrollToInput = () => {\n\n        if (this.createdRef.current && (this.state.keys.length > 0 || this.state.amounts.length > 0)) {\n            this.createdRef.current.scrollIntoView({ behavior: 'smooth' });\n        }\n        else if (this.titleRef.current) {\n            this.titleRef.current.scrollIntoView({ behavior: 'smooth' });\n        }\n    }\n\n    render() {\n        const account = this.props.account;\n        return (\n            <div className=\"ca-container\">\n                {this.state.isRedirect ? <Redirect to='/login' /> : false}\n                <div ref={this.titleRef}></div>\n                <h1>CREATE ACCOUNT</h1>\n                <div className=\"ca-balance-wrap\">\n                    <Balances title=\"CURRENT BALANCE LIST\" labeled={false} balances={account.balances} />\n                </div>\n                <div className=\"ca-input-wrap\">\n                    <div ref={this.createdRef}></div>\n                    <div className=\"ca-keys\">\n                        <Keys title='KEY LIST' keys={this.state.keys} labeled={true} />\n                        <KeyAdder\n                            onKeyChange={(e) => this.onChangePub(e)}\n                            onWeightChange={(e) => this.onChangeWeight(e)}\n                            onThresChange={(e) => this.onChangeThres(e)}\n                            onAdd={() => this.addKey()}\n                            isAddDisabled={!(this.state.publicKey && this.state.weight)}\n                            pub={this.state.publicKey} weight={this.state.weight} thres={this.state.threshold}\n                            useThres={true} />\n                    </div>\n\n                    <div className=\"ca-amounts\">\n                        <Balances title=\"AMOUNT LIST\" balances={this.state.amounts} labeled={true} />\n                        <AmountAdder\n                            onCurrencyChange={(e) => this.onChangeCurrency(e)}\n                            onAmountChange={(e) => this.onChangeAmount(e)}\n                            currency={this.state.currency}\n                            amount={this.state.amount}\n                            isAddDisabled={!(this.state.currency && this.state.amount)}\n                            onAdd={() => this.addAmount()} />\n                    </div>\n                </div>\n                <ConfirmButton\n                    disabled={this.state.amounts.length < 1 || this.state.keys.length < 1 || this.state.threshold === \"\" ? true : false}\n                    onClick={() => this.onClick()}>CREATE</ConfirmButton>\n\n                <OperationConfirm isOpen={this.state.isModalOpen} onClose={() => this.closeModal()} />\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => ({\n    setJson: (json) => dispatch(setOperation(OPER_CREATE_ACCOUNT, json)),\n});\n\nexport default withRouter(connect(\n    null,\n    mapDispatchToProps\n)(CreateAccount));","import React from 'react';\nimport InputBox from '../InputBox';\nimport './ExtraAdder.scss';\n\nfunction ExtraAdder({ thres, currency, onCurrencyChange, onThresChange }) {\n\n    return (\n        <section className='extra-adder-container'>\n            <div className=\"thres-adder\">\n                <p>THRESHOLD :</p>\n                <InputBox\n                    size=\"small\" useCopy={false} disabled={false} placeholder='threshold'\n                    value={thres}\n                    onChange={onThresChange} />\n            </div>\n            <div className=\"currency-adder\">\n                <p>CURRENCY ID:</p>\n                <InputBox\n                    size=\"small\" useCopy={false} disabled={false} placeholder='currency'\n                    value={currency}\n                    onChange={onCurrencyChange} />\n            </div>\n        </section>\n    );\n}\n\nexport default ExtraAdder;","import React, { createRef } from 'react';\nimport { Redirect, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nimport './UpdateKey.scss';\n\nimport ConfirmButton from '../buttons/ConfirmButton';\nimport Keys from '../infos/Keys';\n\nimport KeyAdder from '../adders/KeyAdder';\nimport ExtraAdder from '../adders/ExtraAdder';\n\nimport OperationConfirm from '../modals/OperationConfirm';\n\nimport { Generator } from 'mitumc';\n\nimport { setOperation } from '../../store/actions';\n\nimport { OPER_UPDATE_KEY } from '../../text/mode';\n\nclass UpdateKey extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.createdRef = createRef();\n        this.titleRef = createRef();\n\n        if (!Object.prototype.hasOwnProperty.call(this.props, 'account') || !this.props.account) {\n            this.state = { isRedirect: true }\n            return;\n        }\n\n        this.state = {\n            isRedirect: false,\n\n            keys: [],\n            threshold: \"\",\n            currency: \"\",\n\n            publicKey: \"\",\n            weight: \"\",\n\n            created: undefined,\n            isModalOpen: false,\n\n            download: undefined,\n            filename: \"\"\n        }\n    }\n\n    closeModal() {\n        this.setState({ isModalOpen: false })\n    }\n\n    onClick() {\n        try {\n            const generator = new Generator(process.env.REACT_APP_NETWORK_ID);\n\n            const account = this.props.account;\n            const keys = generator.createKeys(\n                this.state.keys.map(x =>\n                    generator.formatKey(x.key, parseInt(x.weight))),\n                parseInt(this.state.threshold)\n            );\n\n            const keyUpdaterFact = generator.createKeyUpdaterFact(\n                account.address, this.state.currency, keys\n            );\n\n            const keyUpdater = generator.createOperation(keyUpdaterFact, \"\");\n            keyUpdater.addSign(account.privateKey);\n\n            const created = keyUpdater.dict();\n            \n            this.props.setJson(created);\n            this.setState({ isModalOpen: true });\n        }\n        catch (e) {\n            console.log(e);\n            alert('작업을 생성할 수 없습니다. :(\\n입력하신 작업 내용을 확인해주세요~');\n        }\n    }\n\n    onChangePub(e) {\n        this.setState({\n            publicKey: e.target.value\n        });\n    }\n\n    onChangeWeight(e) {\n        this.setState({\n            weight: e.target.value\n        });\n    }\n\n    onChangeThres(e) {\n        this.setState({\n            threshold: e.target.value\n        });\n    }\n\n    onChangeCurrency(e) {\n        this.setState({\n            currency: e.target.value\n        });\n    }\n\n    addKey() {\n        this.setState({\n            keys: [...this.state.keys, {\n                key: this.state.publicKey,\n                weight: this.state.weight\n            }],\n            publicKey: \"\",\n            weight: \"\",\n        });\n    }\n\n    componentDidMount() {\n        this.scrollToInput();\n    }\n\n    componentDidUpdate() {\n        this.scrollToInput();\n    }\n\n    scrollToInput = () => {\n        if (this.createdRef.current && this.state.keys.length > 0) {\n            this.createdRef.current.scrollIntoView({ behavior: 'smooth' });\n        }\n        else if (this.titleRef.current) {\n            this.titleRef.current.scrollIntoView({ behavior: 'smooth' });\n        }\n    }\n\n    render() {\n        const account = this.props.account;\n        return (\n            <div className=\"uk-container\">\n                {this.state.isRedirect ? <Redirect to='/login' /> : false}\n                <div ref={this.titleRef}></div>\n                <h1>UPDATE KEY</h1>\n                <div className=\"uk-info-wrap\">\n                    <Keys title='CURRENT KEY LIST' keys={account.publicKeys} />\n                </div>\n                <div className=\"uk-input-wrap\">\n                    <div ref={this.createdRef} />\n                    <div className=\"uk-keys\">\n                        <Keys title='NEW KEY LIST' keys={this.state.keys} />\n                        <section className='uk-keys-adder'>\n                            <KeyAdder\n                                onKeyChange={(e) => this.onChangePub(e)}\n                                onWeightChange={(e) => this.onChangeWeight(e)}\n                                onAdd={() => this.addKey()}\n                                isAddDisabled={!(this.state.publicKey && this.state.weight)}\n                                pub={this.state.publicKey} weight={this.state.weight}\n                                useThres={false} />\n                            <ExtraAdder\n                                onThresChange={(e) => this.onChangeThres(e)}\n                                onCurrencyChange={(e) => this.onChangeCurrency(e)}\n                                thres={this.state.threshold} currency={this.state.currency} />\n                        </section>\n                    </div>\n                </div>\n                <ConfirmButton\n                    disabled={this.state.keys.length < 1 || this.state.threshold === \"\" || this.state.currency === \"\" ? true : false}\n                    onClick={() => this.onClick()}>UPDATE</ConfirmButton>\n                <OperationConfirm isOpen={this.state.isModalOpen} onClose={() => this.closeModal()} />\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => ({\n    setJson: (json) => dispatch(setOperation(OPER_UPDATE_KEY, json)),\n});\n\nexport default withRouter(connect(\n    null,\n    mapDispatchToProps\n)(UpdateKey));","import React, { createRef } from 'react';\nimport { Redirect, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nimport './Transfer.scss';\n\nimport InputBox from '../InputBox';\nimport AmountAdder from '../adders/AmountAdder';\nimport Balances from '../infos/Balances';\nimport ConfirmButton from '../buttons/ConfirmButton';\n\nimport OperationConfirm from '../modals/OperationConfirm';\n\nimport { Generator } from 'mitumc';\n\nimport { OPER_TRANSFER } from '../../text/mode';\nimport { setOperation } from '../../store/actions';\n\n\nclass Transfer extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.createdRef = createRef();\n        this.titleRef = createRef();\n\n        if (!Object.prototype.hasOwnProperty.call(this.props, 'account') || !this.props.account) {\n            this.state = { isRedirect: true }\n            return;\n        }\n\n        this.state = {\n            isRedirect: false,\n\n            amounts: [],\n\n            currency: \"\",\n            amount: \"\",\n            address: \"\",\n\n            created: undefined,\n            isModalOpen: false,\n\n            download: undefined,\n            filename: \"\"\n        }\n    }\n\n    closeModal() {\n        this.setState({ isModalOpen: false })\n    }\n\n    onClick() {\n        try {\n            const generator = new Generator(process.env.REACT_APP_NETWORK_ID);\n\n            const account = this.props.account;\n            const amounts = generator.createAmounts(\n                this.state.amounts.map(x =>\n                    generator.formatAmount(parseInt(x.amount), x.currency))\n            );\n\n            const transfersFact = generator.createTransfersFact(\n                account.address,\n                [generator.createTransfersItem(\n                    this.state.address, amounts\n                )]\n            );\n\n            const transfers = generator.createOperation(transfersFact, \"\");\n            transfers.addSign(account.privateKey);\n\n            const created = transfers.dict();\n\n            this.props.setJson(created);\n            this.setState({ isModalOpen: true });\n        }\n        catch (e) {\n            console.log(e);\n            alert('작업을 생성할 수 없습니다. :(\\n입력하신 작업 내용을 확인해주세요~');\n        }\n    }\n\n\n    onChangeCurrency(e) {\n        this.setState({\n            currency: e.target.value\n        });\n    }\n\n    onChangeAmount(e) {\n        this.setState({\n            amount: e.target.value\n        });\n    }\n\n    onChangeAddress(e) {\n        this.setState({\n            address: e.target.value\n        });\n    }\n\n    addAmount() {\n        this.setState({\n            amounts: [...this.state.amounts, {\n                currency: this.state.currency,\n                amount: this.state.amount\n            }],\n            currency: \"\",\n            amount: \"\"\n        })\n    }\n\n    componentDidMount() {\n        this.scrollToInput();\n    }\n\n    componentDidUpdate() {\n        this.scrollToInput();\n    }\n\n    scrollToInput = () => {\n\n        if (this.createdRef.current && this.state.amounts.length > 0) {\n            this.createdRef.current.scrollIntoView({ behavior: 'smooth' });\n        }\n        else if (this.titleRef.current) {\n            this.titleRef.current.scrollIntoView({ behavior: 'smooth' });\n        }\n    }\n\n    render() {\n        const account = this.props.account;\n        return (\n            <div className=\"tf-container\">\n                {this.state.isRedirect ? <Redirect to='/login' /> : false}\n                <div ref={this.titleRef}></div>\n                <h1>TRANSFER</h1>\n                <div className=\"tf-balance-wrap\">\n                    <Balances title='CURRENT BALANCE LIST' labeled={false} balances={account.balances} />\n                </div>\n                <div className=\"tf-input-wrap\">\n                    <div ref={this.createdRef} />\n                    <div className=\"tf-amounts\">\n                        <Balances title='AMOUNT LIST' labeled={true} balances={this.state.amounts} />\n                        <AmountAdder\n                            onCurrencyChange={(e) => this.onChangeCurrency(e)}\n                            onAmountChange={(e) => this.onChangeAmount(e)}\n                            currency={this.state.currency}\n                            amount={this.state.amount}\n                            isAddDisabled={!(this.state.currency && this.state.amount)}\n                            onAdd={() => this.addAmount()} />\n                        <div className='tf-address-adder'>\n                            <p>RECEIVER'S ADDRESS:</p>\n                            <InputBox\n                                size=\"medium\" useCopy={false} disabled={false} placeholder='target address'\n                                value={this.state.threshold}\n                                onChange={(e) => this.onChangeAddress(e)} />\n                        </div>\n                    </div>\n                </div>\n                <ConfirmButton\n                    disabled={this.state.amounts.length < 1 || this.state.address === \"\" ? true : false}\n                    onClick={() => this.onClick()}>TRANSFER</ConfirmButton>\n\n                <OperationConfirm isOpen={this.state.isModalOpen} onClose={() => this.closeModal()} />\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => ({\n    setJson: (json) => dispatch(setOperation(OPER_TRANSFER, json)),\n});\n\nexport default withRouter(connect(\n    null,\n    mapDispatchToProps\n)(Transfer));","import React from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport './Operation.scss';\n\nimport CreateAccount from '../components/operations/CreateAccount';\nimport UpdateKey from '../components/operations/UpdateKey';\nimport Transfer from '../components/operations/Transfer';\nimport { connect } from 'react-redux';\n\nimport * as mode from '../text/mode';\nimport { isStateValid } from '../lib/Validation';\n\nclass Operation extends React.Component {\n    constructor(props) {\n        super(props);\n\n        if (!isStateValid(this.props)\n            || !Object.prototype.hasOwnProperty.call(this.props.location.state, 'operation') || !this.props.location.state.operation\n            || !this.props.isLogin) {\n\n            this.state = {\n                isRedirect: true,\n                account: undefined,\n                operation: undefined\n            };\n            return;\n        }\n\n        this.state = {\n            isRedirect: this.props.isLogin ? false : true,\n            account: this.props.account,\n            operation: this.props.location.state.operation\n        }\n    }\n\n    render() {\n        let redirect;\n        if (this.props.isLogin) {\n            redirect = `/wallet/${this.props.account.address}`;\n        }\n        else {\n            redirect = '/login';\n        }\n\n        return (\n            <div className=\"oper-container\">\n                {this.state.isRedirect ? <Redirect to={redirect} /> : false}\n                {this.state.operation === mode.OPER_CREATE_ACCOUNT ?\n                    <CreateAccount account={this.state.account} /> : (\n                        this.state.operation === mode.OPER_UPDATE_KEY ?\n                            <UpdateKey account={this.state.account} /> : (\n                                this.state.operation === mode.OPER_TRANSFER ?\n                                    <Transfer account={this.state.account} /> : <Redirect to={redirect} />\n                            ))}\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => ({\n    isLogin: state.login.isLogin,\n    account: state.login.account\n});\n\nexport default connect(\n    mapStateToProps,\n)(Operation);","import React, { createRef } from 'react';\nimport { Redirect, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { setOperation } from '../store/actions';\nimport copy from 'copy-to-clipboard';\n\nimport './Sign.scss';\n\nimport ConfirmButton from '../components/buttons/ConfirmButton';\n\nimport { Signer } from 'mitumc';\n\nimport OperationConfirm from '../components/modals/OperationConfirm';\n\nimport { TYPE_CREATE_ACCOUNT, TYPE_UPDATE_KEY, TYPE_TRANSFER } from '../text/mode';\nimport { isOperation, isStateValid } from '../lib/Validation';\nimport { OPER_CREATE_ACCOUNT, OPER_DEFAULT, OPER_TRANSFER, OPER_UPDATE_KEY } from '../text/mode';\n\nconst onCopy = (msg) => {\n    copy(msg);\n    alert('copied!');\n}\n\nconst preStyle = {\n    display: 'block',\n    padding: '10px 30px',\n    margin: '0',\n    overflow: 'visible',\n    whiteSpace: \"pre-wrap\"\n}\n\nconst sig = (x) => {\n    return (\n        <li key={x}>{x}</li>\n    );\n}\n\nconst getOperationFromType = (type) => {\n    switch (type) {\n        case TYPE_CREATE_ACCOUNT:\n            return OPER_CREATE_ACCOUNT;\n        case TYPE_UPDATE_KEY:\n            return OPER_UPDATE_KEY;\n        case TYPE_TRANSFER:\n            return OPER_TRANSFER;\n        default:\n            return OPER_DEFAULT;\n    }\n}\n\nclass Sign extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.createdRef = createRef();\n        this.infoRef = createRef();\n        this.jsonRef = createRef();\n\n        if (!isStateValid(this.props) || !this.props.isLogin) {\n            this.state = {\n                isRedirect: true\n            }\n            return;\n        }\n\n        this.props.setJson(OPER_DEFAULT, {});\n\n        this.state = {\n            isRedirect: false,\n            type: \"\",\n            sigs: [],\n\n            isModalOpen: false,\n            isJsonOpen: false\n        }\n    }\n\n    closeModal() {\n        this.setState({ isModalOpen: false })\n    }\n\n    componentDidMount() {\n        this.scrollToJSON();\n    }\n\n    componentDidUpdate() {\n        this.scrollToJSON();\n    }\n\n    scrollToJSON = () => {\n        if (this.jsonRef.current && this.state.isJsonOpen) {\n            this.jsonRef.current.scrollIntoView({ behavior: 'smooth' });\n        }\n        else if (this.infoRef.current && this.state.json && !this.state.isJsonOpen) {\n            this.infoRef.current.scrollIntoView({ behavior: 'smooth' });\n        }\n        else if (this.createdRef.current) {\n            this.createdRef.current.scrollIntoView({ behavior: 'smooth' });\n        }\n    }\n\n    jsonView() {\n        return (\n            <div className=\"sign-json\">\n                {!(this.props.operation === OPER_DEFAULT)\n                    ? (\n                        <pre style={preStyle}\n                            onClick={() => onCopy(JSON.stringify(this.props.json, null, 4))}>\n                            {JSON.stringify(this.props.json, null, 4)}\n                        </pre>\n                    ) : false}\n            </div>\n        );\n    }\n\n    importJSON(e) {\n        const file = e.target.files[0];\n        const reader = new FileReader();\n        const json = this.props.json;\n\n        try {\n            reader.onload = () => {\n                const parsed = JSON.parse(reader.result);\n                if (!isOperation(parsed)) {\n                    alert('유효하지 않은 작업 파일입니다.');\n                }\n                else {\n                    const operation = getOperationFromType(parsed._hint);\n                    this.props.setJson(operation, parsed);\n                    this.setState({\n                        type: parsed._hint,\n                        sigs: parsed.fact_signs.map(x => x.signature),\n                    })\n                }\n            };\n            reader.readAsText(file, \"utf-8\");\n        } catch (e) {\n            const operation = getOperationFromType(json._hint);\n\n            this.props.setJson(operation, json);\n            this.setState({\n                type: json ? json._hint : \"\",\n                sigs: json && Object.prototype.hasOwnProperty.call(json, 'fact_signs') ? json.fact_signs.map(x => x.signature) : []\n            });\n            alert('유효하지 않은 작업파일 입니다.');\n        }\n    }\n\n    onClickSend() {\n        this.setState({\n            isModalOpen: true\n        })\n    }\n\n    onClickSign() {\n        let target = this.props.json;\n\n        if (!isOperation(target)) {\n            return;\n        }\n\n        const signer = new Signer(process.env.REACT_APP_NETWORK_ID, this.props.account.privateKey);\n\n        try {\n            const json = signer.signOperation(target);\n            const operation = getOperationFromType(json._hint);\n\n            this.props.setJson(operation, json);\n            this.setState({\n                type: json._hint,\n                sigs: json.fact_signs.map(x => x.signature)\n            });\n            alert('성공! :D');\n        }\n        catch (e) {\n            const operation = getOperationFromType(target._hint);\n            this.props.setJson(operation, target);\n\n            this.setState({\n                type: Object.prototype.hasOwnProperty.call(target, '_hint') ? target._hint : \"\",\n                sigs: target.fact_signs.map(x => x.signature)\n            })\n            alert('작업에 서명을 추가할 수 없습니다. :(');\n        }\n    }\n\n    openJSON() {\n        this.setState({\n            isJsonOpen: !this.state.isJsonOpen\n        })\n    }\n\n    render() {\n        return (\n            <div className=\"sign-container\">\n                {this.state.isRedirect ? <Redirect to='/login' /> : false}\n                <div ref={this.createdRef} />\n                <h1>SIGN / SEND OPERATION</h1>\n                <div ref={this.infoRef} />\n                <div className=\"sign-operation\">\n                    <div className=\"sign-info\">\n                        <span id=\"other\">\n                            <p id=\"head\">FACT HASH</p>\n                            <p id=\"body\">\n                                {\n                                    this.props.json && Object.prototype.hasOwnProperty.call(this.props.json, 'fact')\n                                        ? this.props.json.fact.hash\n                                        : \"NONE\"\n                                }\n                            </p>\n                        </span>\n                        <span id=\"other\">\n                            <p id=\"head\">TYPE</p>\n                            <p id=\"body\">{this.state.type ? this.state.type : \"NONE\"}</p>\n                        </span>\n                        <span id=\"sig\">\n                            <p id=\"head\">SIGNATURES</p>\n                            <ul>\n                                {this.state.sigs.length > 0\n                                    ? this.state.sigs.map(x => sig(x))\n                                    : (\n                                        <li style={{ textAlign: \"center\" }}>-</li>\n                                    )\n                                }\n                            </ul>\n                        </span>\n                    </div>\n                    <div ref={this.jsonRef} />\n                    {this.props.json\n                        ? (\n                            <div className='sign-view-json'\n                                onClick={() => this.openJSON()}>\n                                <p>{this.state.isJsonOpen ? \"CLOSE\" : \"VIEW JSON\"}</p>\n                            </div>\n                        ) : false}\n                    {this.state.isJsonOpen ? this.jsonView() : false}\n                    <div className=\"sign-files\">\n                        <input type=\"file\" onChange={(e) => this.importJSON(e)} />\n                    </div>\n                </div>\n                <div className=\"sign-buttons\">\n                    <ConfirmButton disabled={this.props.operation === OPER_DEFAULT} onClick={() => this.onClickSend()}>SEND</ConfirmButton>\n                    <ConfirmButton disabled={this.props.operation === OPER_DEFAULT} onClick={() => this.onClickSign()}>SIGN</ConfirmButton>\n                </div>\n                <OperationConfirm isOpen={this.state.isModalOpen} onClose={() => this.closeModal()} />\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => ({\n    isLogin: state.login.isLogin,\n    account: state.login.account,\n\n    operation: state.operation.operation,\n    json: state.operation.json,\n});\n\nconst mapDispatchToProps = dispatch => ({\n    setJson: (operation, json) => dispatch(setOperation(operation, json)),\n});\n\nexport default withRouter(connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Sign));","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Link, Redirect } from 'react-router-dom';\nimport './Navigation.scss';\n\nvar isClose = false;\n\nclass Navigation extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            rand: 0\n        }\n    }\n\n    close() {\n        isClose = true;\n        this.setState({ rand: this.state.rand + 1 })\n    }\n\n    check() {\n        if (isClose) {\n            isClose = false;\n            return <Redirect to=\"/logout\" />\n        }\n        else {\n            return false;\n        }\n    }\n\n    render() {\n        const { isLogin, account } = this.props;\n        const addr = account ? account.address.substring(0, 10) + \"... (close wallet)\" : undefined;\n\n        return (\n            <div className=\"nav\">\n                {this.state.rand ? this.check() : false}\n                <Link className=\"nav-title\" to=\"/\">\n                    <p>MITUM WEB WALLET</p>\n                </Link>\n                <Link className={\"nav-login \" + (isLogin ? \"on\" : \"off\")} to=\"/login\">\n                    <p>OPEN WALLET</p>\n                </Link>\n                {isLogin ? <p onClick={() => this.close()} id=\"nav-addr\">{addr}</p> : false}\n                {isLogin\n                    ? (\n                        <Link className=\"nav-sign\" \n                            to={{\n                                pathname: '/sign',\n                                state: {\n                                    json: undefined\n                                }\n                            }}>\n                            <p>SIGN OPERATION</p>\n                        </Link>\n                    ) : false}\n                <Link className=\"main\" to=\"/key-generate\">\n                    <p>GENERATE KEYPAIR</p>\n                </Link>\n                {account && account.restoreKey\n                    ? (\n                        <Link className=\"main\" to=\"/res-key-generate\">\n                            <p>GENERATE RESTORE KEY</p>\n                        </Link>\n                    ) : false}\n                <Link className=\"main nav-help\" to=\"/help\">\n                    <p>HELP</p>\n                </Link>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => ({\n    isLogin: state.login.isLogin,\n    account: state.login.account\n});\n\nexport default connect(\n    mapStateToProps,\n)(Navigation);","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport { logout, clearHistory } from '../store/actions';\n\nimport './Logout.scss';\n\nclass Logout extends React.Component {\n    constructor(props) {\n        super(props);\n        this.props.signOut();\n        this.props.clearHistory();\n    }\n    \n    render() {\n        return !this.props.isLogin\n            ? <Redirect to=\"/login\" />\n            : <span>WAIT...</span>;\n    }\n\n}\n\nconst mapStateToProps = state => ({\n    isLogin: state.login.isLogin\n});\n\nconst mapDispatchToProps = dispatch => ({\n    signOut: () => dispatch(logout()),\n    clearHistory: () => dispatch(clearHistory())\n});\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps,\n)(Logout);","import React from 'react';\nimport './Footer.scss';\n\nfunction Footer() {\n    return (\n        <div className=\"footer-container\">\n            <a href=\"https://github.com/ProtoconNet/mitum-web-wallet\">https://github.com/ProtoconNet/mitum-web-wallet</a>\n        </div>\n    );\n}\n\nexport default Footer;","import React from 'react';\nimport './LogoutConfirm.scss';\nimport { connect } from 'react-redux';\nimport { logout } from '../../store/actions';\n\nclass LogoutConfirm extends React.Component {\n\n    onLogout() {\n        this.props.signOut();\n        this.props.onClose();\n    }\n\n    render() {\n        const { isOpen } = this.props;\n        return (\n            <div className={isOpen ? 'openModal modal' : 'modal'}>\n                {isOpen ? (\n                    <section>\n                        <header>\n                            Wallet Closed\n                            <button className=\"close\" onClick={() => this.onLogout()}> &times; </button>\n                        </header>\n                        <main>\n                            <p>{\"지갑이 닫힙니다. 변경된 비밀키로 지갑을 다시 열어주세요.\\n* 작업 실패 시에는 기존 비밀키를 사용해야 합니다.\"}</p>\n                            <span>\n                                <p className=\"modal-button\" id=\"confirm\" onClick={() => this.onLogout()}>확인</p>\n                            </span>\n                        </main>\n                    </section>\n                ) : null}\n            </div>\n        )\n    }\n}\n\nconst mapDispatchToProps = dispatch => ({\n    signOut: () => dispatch(logout()),\n});\n\nexport default connect(\n    null,\n    mapDispatchToProps,\n)(LogoutConfirm);","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect, withRouter } from 'react-router-dom';\nimport { setOperation, setResponse } from '../store/actions';\nimport copy from 'copy-to-clipboard';\n\nimport './Response.scss';\nimport LogoutConfirm from '../components/modals/LogoutConfirm';\nimport { OPER_CREATE_ACCOUNT, OPER_DEFAULT, OPER_TRANSFER, OPER_UPDATE_KEY } from '../text/mode';\n\nconst onCopy = (msg) => {\n    copy(msg);\n    alert(\"copied!\");\n}\n\nconst address = (keyHash) => {\n    return (\n        <li key={keyHash}>\n            <p onClick={() => onCopy(keyHash)}>{keyHash}</p>\n        </li>\n    )\n}\n\nclass Response extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        const isSignOut = this.props.operation === OPER_UPDATE_KEY;\n        this.state = {\n            isRedirect: false,\n            isModalOpen: isSignOut,\n            isSignOut,\n        }\n    }\n\n    closeModal() {\n        this.setState({ isModalOpen: false })\n    }\n\n    renderResponse() {\n        const { res, status, operation, data } = this.props;\n\n        switch (status) {\n            case 200:\n                return (\n                    <section className={\"res-detail success\"}>\n                        {\n                            operation === OPER_UPDATE_KEY\n                            ? <h1>KEY UPDATE SUCCESS~ :D</h1>\n                            : <h1>BROADCAST SUCCESS~ :D</h1>\n                        }\n                        <div>\n                            {operation === OPER_CREATE_ACCOUNT\n                                ? (\n                                    <section>\n                                        <h2>CREATED ADDRESS LIST</h2>\n                                        <ul>\n                                            {data.map(x => address(x))}\n                                        </ul>\n                                        <p>지갑 생성 성공 여부는 지갑 페이지에서 확인해주세요.</p>\n                                    </section>\n                                ) : false\n                            }\n                            {operation === OPER_TRANSFER\n                                ? (\n                                    <section>\n                                        <p>송금 성공 여부는 지갑 페이지에서 확인해주세요.</p>\n                                    </section>\n                                )\n                                : false\n                            }\n                        </div>\n                    </section>\n                )\n            case 400:\n                return (\n                    <section className={\"res-detail fail\"}>\n                        <h1>{\"400 FAIL... :(\"}</h1>\n                        <p>{res.title}</p>\n                    </section>\n                )\n            default:\n                return (\n                    <section className={\"res-detail fail\"}>\n                        <h1>{\"FAIL... :(\"}</h1>\n                        <p>응답을 받지 못했습니다.</p>\n                    </section>\n                )\n        }\n    }\n\n    renderRedirect() {\n        if(this.state.isRedirect) {\n            this.props.clearJson();\n            return <Redirect to='/login' />;\n        }\n        return false;\n    }\n\n    render() {\n        return (\n            <div className=\"res-container\">\n                {this.renderRedirect()}\n                {this.renderResponse()}\n                <LogoutConfirm isOpen={this.state.isModalOpen} onClose={() => this.closeModal()}/>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    operation: state.operation.operation,\n    data: state.operation.data,\n    res: state.operation.res,\n    status: state.operation.status,\n    isStateIn: state.operation.isStateIn,\n    isBroadcast: state.operation.isBroadcast\n});\n\nconst mapDispatchToProps = dispatch => ({\n    clearJson: () => dispatch(setOperation(OPER_DEFAULT, {})),\n    setResult: (isBroadcast, isStateIn, res, status, data) => dispatch(setResponse(isBroadcast, isStateIn, res, status, data)),\n});\n\nexport default withRouter(connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Response));","import React from 'react';\nimport { Redirect, withRouter } from 'react-router-dom';\nimport axios from 'axios';\n\nimport './UpdateKeyLoad.scss';\nimport { connect } from 'react-redux';\nimport { setResponse } from '../store/actions';\n\nclass UpdateKeyLoad extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isRedirect: false,\n            counter: 0,\n        }\n    }\n\n    renderRedirect() {\n        if (this.state.isRedirect) {\n            return (\n                <Redirect to='/response' />\n            )\n        }\n    }\n\n    getResponse() {\n        if (this.state.counter < 50) {\n            const { data, res, isBroadcast } = this.props;\n\n            const getResult = async (_hash, _res, isBroadcast) => {\n                return await axios.get(process.env.REACT_APP_API_SEARCH_FACT + _hash)\n                    .then(\n                        response => {\n                            if (response.data._embedded.in_state) {\n                                this.props.setResult(true, true, _res, 200, _hash);\n                                this.setState({\n                                    isRedirect: true,\n                                });\n                            }\n                            else {\n                                this.props.setResult(true, false, {\n                                    title: response.data._embedded.reason.msg\n                                }, 400, _hash);\n                                this.setState({\n                                    isRedirect: true,\n                                })\n                            }\n                        }\n                    )\n                    .catch(\n                        e => {\n                            if (e.response.data.status === 404) {\n                                this.setState({\n                                    counter: this.state.counter + 1\n                                })\n                            }\n                            else {\n                                this.props.setResult(true, false, e.response.data, 400, _hash);\n                                this.setState({\n                                    isRedirect: true,\n                                });\n                            }\n                        }\n                    )\n            }\n\n            setTimeout((hs, rs, broad) => {\n                getResult(hs, rs, broad);\n            }, 5000, data, res, isBroadcast);\n\n            return () => this.getResponse();\n        }\n        else {\n            this.props.setResult(true, false, {\n                title: \"Too long time to stay response. Maybe mitum failed to process your operation. :(\"\n            }, 400, this.props.data);\n            this.setState({\n                isRedirect: true,\n            });\n        }\n    }\n\n    componentDidMount() {\n        this.getResponse();\n    }\n\n    render() {\n        return (\n            <div className=\"load-container\">\n                {this.renderRedirect()}\n                <section className=\"load-detail\">\n                    <h1>Loading...</h1>\n                    <p>{\"키 업데이트 성공 여부를 조회 중입니다. 잠시만 기다려주세요! >~<\"}</p>\n                    <p>{`REQUEST COUNT: ${this.state.counter}`}</p>\n                </section>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    data: state.operation.data,\n    res: state.operation.res,\n    status: state.operation.status,\n});\n\nconst mapDispatchToProps = dispatch => ({\n    setResult: (isBroadcast, isStateIn, res, status, data) => dispatch(setResponse(isBroadcast, isStateIn, res, status, data)),\n});\n\nexport default withRouter(connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(UpdateKeyLoad));","import React from 'react';\nimport { HashRouter, Route } from 'react-router-dom';\nimport './App.scss';\n\nimport Home from './views/Home';\nimport Login from './views/Login';\nimport Wallet from './views/Wallet';\nimport KeyGen from './views/KeyGen';\nimport ResKeyGen from './views/ResKeyGen';\nimport Help from './views/Help';\nimport Operation from './views/Operation';\nimport Sign from './views/Sign';\n\nimport Navigation from './components/Navigation';\nimport Logout from './views/Logout';\nimport Footer from './components/Footer';\nimport Response from './views/Response';\nimport UpdateKeyLoad from './views/UpdateKeyLoad';\n\nclass App extends React.Component {\n  render() {\n\n    return (\n      <div className=\"app-container\">\n        <HashRouter >\n          <Navigation />\n          <Route exact path=\"/\" component={Home} />\n          <Route path=\"/login\" component={Login} />\n          <Route path=\"/wallet/:account\" component={Wallet} />\n          <Route path=\"/key-generate\" component={KeyGen} />\n          <Route path=\"/res-key-generate\" component={ResKeyGen} />\n          <Route path=\"/help\" component={Help} />\n          <Route path=\"/operation\" component={Operation} />\n          <Route path=\"/sign\" component={Sign} />\n          <Route path=\"/logout\" component={Logout} />\n          <Route path=\"/response\" component={Response} />\n          <Route path='/loading' component={UpdateKeyLoad} />\n          <Footer />\n        </HashRouter>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport store from './store/store';\n\nimport './index.scss';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n","/* SDK module */\nconst Xutil = require('./util');\nconst Xhint = require('./hint');\nconst VERSION = require('./constant').VERSION;\n\n/* base58 package */\nconst bs58 = require('bs58');\nconst bs58check = require('bs58check');\n\n/* crypto package */\nconst stellar = require('stellar-sdk');\nconst eccrypto = require('eccrypto-js');\nconst elliptic = require('elliptic');\nconst ec = new elliptic.ec('secp256k1');\n\nconst crypto = require('crypto');\n\n/**\n * @function\n * Compares two Key object by Key._buffer().\n * Used to sorting Key objects in Keys.buffer().\n * @param {Key} x - First Key object to compare\n * @param {Key} y - Second Key object to compare\n * @return {number} - Result of comparison: [ (x < y)neg num | (x == y)0 | (x > y)pos num ]\n */\nconst compare = (x, y) => {\n    return Buffer.compare(x.key._buffer(), y.key._buffer());\n}\n\n/**\n * @class\n * Typed key.\n * @property {string} hint - '[type]-[version]'\n * @property {string} key - Hintless key\n */\nclass BaseKey {\n    /** \n     * @constructor \n     * @param {string} key - [ (type='unknown')hinted key | (type!='unknown')hintless key ]\n     * @param {string} type - [ BTC_PBLCKEY | BTC_PRIVKEY | ETHER_PBLCKEY | ETHER_PRIVKEY | STELLAR_PBLCKEY | STELLAR_PRIVKEY | 'unknown' ]\n     */\n    constructor(key, type) {\n        if (type == 'unknown') {\n            const parsed = Xutil.parseHinted(key);\n            this.hint = parsed.hint;\n            this.key = parsed.hintless;\n        }\n        else {\n            this.hint = Xutil._hint(type);\n            this.key = key;\n        }\n    }\n\n    /**\n     * @method\n     * Returns hinted key.\n     * @return {string} - '[key]:[type]-[version]'\n     */\n    hinted() {\n        return this.key + ':' + this.hint;\n    }\n\n    /**\n     * @method\n     * Returns Buffer of hinted key.\n     * @return {Buffer} - Buffered hinted key \n     */\n    buffer() {\n        return Buffer.from(this.hinted())\n    }\n\n    /**\n     * @method\n     * Returns Buffer of hintless key.\n     * @return {Buffer} - Buffered hintless key. \n     */\n    _buffer() {\n        return Buffer.from(this.key);\n    }\n};\n\n\n/**\n * @class\n * Key containing key and its weight.\n * @property {string} hint - 'MC_KEY:[version]'\n * @property {BaseKey} key - BaseKey object for key\n * @property {Xutil.BigInteger} weight - weight of key \n */\nclass Key {\n    /** \n     * @constructor \n     * @param {string} key - Hinted key\n     * @param {number} w - weight\n     * */\n    constructor(key, w) {\n        this.hint = Xutil._hint(Xhint.MC_KEY);\n        this.key = new BaseKey(key, 'unknown');\n        this.weight = new Xutil.BigInteger(w);\n    }\n\n    /**\n     * @method\n     * Concatenates key.buffer() and weight.buffer() then\n     * Returns concatenated Buffer.\n     * @return {Buffer} - Concatenated Buffer: key.buffer()~weight.buffer()\n     */\n    buffer() {\n        return Buffer.concat(\n            [this.key.buffer(), this.weight.buffer()]\n        );\n    }\n\n    /**\n     * @method\n     * Returns key dictionary.\n     * @return {object} - Dictionary object: {_hint, weight, key}\n     */\n    dict() {\n        const key = {};\n        key._hint = this.hint;\n        key.weight = this.weight.value;\n        key.key = this.key.hinted();\n        return key;\n    }\n};\n\n\n\n/**\n * @class\n * Keys containing Key list, threshold and hash.\n * @property {string} hint - 'MC_KEYS:[version]'\n * @property {object} keys - Array that each element is Key object\n * @property {Xutil.BigInteger} thereshold - threshold of Keys\n * @property {Buffer} hash - hash of keys\n\n */\nclass Keys {\n    /**\n     * @constructor\n     * @param {object} keys - Array that each element is Key object\n     * @param {number} threshold - threshold\n     */\n    constructor(keys, threshold) {\n        this.hint = Xutil._hint(Xhint.MC_KEYS);\n        this.keys = keys;\n        this.threshold = new Xutil.BigInteger(threshold);\n        this.hash = this._generateHash();\n    }\n\n    get address() {\n        return this.hash.hash + ':' + Xhint.MC_ADDRESS + '-' + VERSION;\n    }\n\n    /**\n     * @method\n     * Sorts keys by key.buffer().\n     * Concatenates every key.buffer() in keys and threshold.buffer() then\n     * Returns concatenated Buffer.\n     * @return {Buffer} - Concatenated Buffer: *key.buffer()~threshold.buffer()\n     */\n    buffer() {\n        const karr = [];\n        for (var i = 0; i < this.keys.length; i++) {\n            karr.push(this.keys[i]);\n        }\n        const sortedkeys = karr.sort(compare);\n        const bkeys = Xutil.concatObjectsToBuffer(sortedkeys)\n\n        const bthreshold = this.threshold.buffer();\n\n        return Buffer.concat([bkeys, bthreshold]);\n    }\n\n    /**\n     * @method\n     * Returns keys dictionary.\n     * @return {object} - Dictionary object: {_hint, hash, threshold}\n     */\n    dict() {\n        const keys = {};\n        keys._hint = this.hint;\n        keys.hash = bs58.encode(this.hash);\n\n        const _keys = [];\n        for (var i = 0; i < this.keys.length; i++) {\n            _keys.push(\n                this.keys[i].dict()\n            );\n        }\n        keys.keys = _keys;\n        keys.threshold = this.threshold.value;\n\n        return keys;\n    }\n\n    /**\n     * @method\n     * Returns hash of Keys.buffer().\n     * @return {Buffer} - hash in Buffer\n     */\n    _generateHash() {\n        return Xutil.sum256(this.buffer());\n    }\n};\n\n\n/**\n * @class\n * Keypair containing key type, private key and public key.\n * BTCKeypair, ETHERKeypair, and  StellarKeypair extend this class.\n * @property {string} type - [ BTC_PBLCKEY | ETHER_PBLCKEY | STELLAR_PBLCKEY ]\n * @property {BaseKey} privKey - Private key\n * @property {string} pubKey - Public Key\n * @property {object} keypair - keypair up to key type (up to sdk)\n */\nclass Keypair {\n    /**\n     * @constructor\n     * @param {string} privKey - Hintless private key\n     * @param {string} type - [ BTC_PBLCKEY | ETHER_PBLCKEY | STELLAR_PBLCKEY ]\n     */\n    constructor(privKey, type) {\n        switch (type) {\n            case Xhint.BTC_PBLCKEY:\n                this.privKey = new BaseKey(privKey, Xhint.BTC_PRIVKEY);\n                break;\n            case Xhint.ETHER_PBLCKEY:\n                this.privKey = new BaseKey(privKey, Xhint.ETHER_PRIVKEY);\n                break;\n            case Xhint.STELLAR_PBLCKEY:\n                this.privKey = new BaseKey(privKey, Xhint.STELLAR_PRIVKEY);\n                break;\n            default:\n                throw '[ERROR] Invalid keypair type';\n        }\n        this.pubKey = undefined;\n        this.keypair = undefined;\n        this.type = type;\n    }\n\n    /**\n     * @method\n     * Returns hinted public key.\n     * @return {string} - '[key]:[type]-[version]'\n     */\n    getPublicKey() {\n        return this.pubKey + ':' + Xutil._hint(this.type);\n    }\n\n    /**\n     * @abstract\n     * Generates signature for message.\n     * @param {Buffer} msg - Message to sign\n     * @return {Buffer} - Generated signature\n     */\n    sign(msg) {\n        throw '[ERROR] Unimplemented function sign(msg)';\n    }\n\n    /**\n     * @abstract\n     * Generates public key by provided private key.\n     */\n    _generatePublicKey() {\n        throw '[ERROR] Unimplemented function _generatePublicKey()';\n    }\n};\n\n\n/**\n * @class\n * @extends Keypair\n * BTC Keypair.\n * @property {string} type - BTC_PBLCKEY\n * @property {BaseKey} privKey - BTC Private key\n * @property {string} pubKey - BTC Public key\n * @property {elliptic.ec.KeyPair} keypair - BTC keypair\n */\nclass BTCKeypair extends Keypair {\n    /**\n     * @construtor\n     * @param {string} privKey - Hintless BTC private key\n     */\n    constructor(privKey) {\n        super(privKey, Xhint.BTC_PBLCKEY);\n        this._generatePublicKey();\n    }\n\n    /**\n     * @override\n     * Generates BTC signature for message.\n     * @param {Buffer} msg - Message to sign\n     * @return {Buffer} - Generated BTC signature\n     */\n    sign(msg) {\n        const _msg = Xutil.sha256(Xutil.sha256(msg));\n        const sk = this.keypair.getPrivate('hex');\n\n        return Buffer.from(ec.sign(_msg, sk, 'hex', { canonical: true }).toDER());\n    }\n\n    /**\n     * @override\n     * Generates BTC public key by provided private key.\n     */\n    _generatePublicKey() {\n        const _sk = bs58check.decode(this.privKey.key);\n        const _decode = Buffer.from(_sk.slice(1, _sk.length - 1));\n\n        this.keypair = ec.keyFromPrivate(_decode);\n        this.pubKey = bs58.encode(eccrypto.getPublicCompressed(_decode));\n    }\n};\n\n\n/**\n * @class\n * @extends Keypair\n * ETHER Keypair.\n * @property {string} type - ETHER_PBLCKEY\n * @property {BaseKey} privKey - ETHER Private key\n * @property {string} pubKey - ETHER Public key\n * @property {elliptic.ec.KeyPair} keypair - ETHER keypair\n */\nclass ETHKeypair extends Keypair {\n    /**\n     * @construtor\n     * @param {string} privKey - Hintless ETHER private key\n     */\n    constructor(privKey) {\n        super(privKey, Xhint.ETHER_PBLCKEY);\n        this._generatePublicKey();\n    }\n    /**\n     * @override\n     * Generates ETHER signature for message.\n     * @param {Buffer} msg - Message to sign\n     * @return {Buffer} - Generated ETHER signature\n     */\n    sign(msg) {\n        const _msg = Xutil.sha256(msg);\n        const sk = this.keypair.getPrivate('hex');\n\n        const sig = ec.sign(_msg, sk, 'hex', { canonical: true }).toDER();\n\n        const rlen = sig[3];\n        const r = sig.slice(4, 4 + rlen);\n        const slen = sig[5 + rlen];\n        const s = sig.slice(6 + rlen);\n\n        const _rlen = new Xutil.BigInteger(rlen);\n        const brlen = _rlen.little();\n\n        const buf = Buffer.alloc(rlen + slen + 4);\n        brlen.copy(buf, 0, 0, 4);\n        Buffer.from(r).copy(buf, 4, 0, rlen);\n        Buffer.from(s).copy(buf, rlen, 0, slen);\n\n        return buf;\n    }\n\n    /**\n     * @override\n     * Generates ETHER public key by provided private key.\n     */\n    _generatePublicKey() {\n        this.keypair = ec.keyFromPrivate(this.privKey.key);\n        this.pubKey = this.keypair.getPublic().encode('hex');\n    }\n};\n\n\n/**\n * @class\n * @extends Keypair\n * Stellar Keypair.\n * @property {string} type - STELLAR_PBLCKEY\n * @property {BaseKey} privKey - Stellar Private key\n * @property {string} pubKey - Stellar Public key\n * @property {stellar.Keypair} keypair - Stellar keypair\n */\nclass StellarKeypair extends Keypair {\n    /**\n     * @construtor\n     * @param {string} privKey - Hintless Stellar private key\n     */\n    constructor(privKey) {\n        super(privKey, Xhint.STELLAR_PBLCKEY);\n        this._generatePublicKey();\n    }\n\n    /**\n     * @override\n     * Generates Stellar signature for message.\n     * @param {Buffer} msg - Message to sign\n     * @return {Buffer} - Generated Stellar signature\n     */\n    sign(msg) {\n        return this.keypair.sign(msg);\n    }\n\n    /**\n     * @override\n     * Generates Stellar public key by provided private key.\n     */\n    _generatePublicKey() {\n        this.keypair = stellar.Keypair.fromSecret(this.privKey.key);\n        this.pubKey = this.keypair.publicKey();\n    }\n};\n\nconst _btckp = () => {\n    const _pk = Buffer.from(\n        '80' + ec.genKeyPair().getPrivate('hex') + '01', 'hex');\n\n    let _hs = Xutil.sha256(_pk);\n    _hs = Xutil.sha256(_hs);\n\n    const checksum = Buffer.from(_hs.subarray(0, 4));\n    return new BTCKeypair(bs58.encode(\n        Buffer.concat([_pk, checksum])\n    ));\n};\n\nconst _ethkp = () => {\n    return new ETHKeypair(ec.genKeyPair().getPrivate('hex'));\n}\n\nconst _stlkp = () => {\n    return new StellarKeypair(stellar.Keypair.random().secret());\n}\n\nconst getKeypair = (_type) => {\n    if (_type == 'btc') {\n        return _btckp();\n    }\n    else if (_type == 'ether') {\n        return _ethkp();\n    }\n    else if (_type == 'stellar') {\n        return _stlkp();\n    }\n    else {\n        throw \"[ERROR] Wrong Input! (Usage: <getKeypair(#type)> type: 'btc', 'ether', 'stellar')\";\n    }\n};\n\nconst toKeypair = (_key, _type) => {\n    let type = _type;\n    let key = _key;\n    if (_type == '') {\n        if (_key.indexOf(':') === -1) {\n            throw \"[ERROR] Wrong Input!\\n(Usage: <toKeypair(key, type)> (#key, #type) must be (hinted-key, '') or (hintless-key, 'btc' | 'ether' | 'stellar'))\"\n        }\n        else {\n            const parsed = Xutil.parseHinted(_key);\n            key = parsed.hintless;\n            type = Xutil.getTypeFromHint(parsed.hint);\n        }\n    }\n    switch (type) {\n        case 'btc':\n        case Xhint.BTC_PRIVKEY:\n            return new BTCKeypair(key);\n        case 'ether':\n        case Xhint.ETHER_PRIVKEY:\n            return new ETHKeypair(key);\n        case 'stellar':\n        case Xhint.STELLAR_PRIVKEY:\n            return new StellarKeypair(key);\n        default:\n            throw '[ERROR] Wrong key type'\n    }\n    return null;\n}\n\nmodule.exports = {\n    Key,\n    Keys,\n    BTCKeypair,\n    ETHKeypair,\n    StellarKeypair,\n    getKeypair,\n    toKeypair\n};"],"sourceRoot":""}